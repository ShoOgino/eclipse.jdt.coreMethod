	// Called with system compiler and Eclipse compiler
	private void internalTestGenerateClass(JavaCompiler compiler) {
		File targetFolder = TestUtils.concatPath(BatchTestUtils.getSrcFolderName(), "targets", "dispatch");
		File inputFile = TestUtils.copyResource("targets/dispatch/HasGenClass.java.txt", targetFolder, "HasGenClass.java");
		
		List<String> options = new ArrayList<String>();
		BatchTestUtils.compileOneClass(compiler, inputFile, options);
		
		// check that the gen-src and class files were generated
 		File genSrcFile = TestUtils.concatPath(BatchTestUtils.getGenFolderName(), "gen", "HgcGen.java");
 		assertTrue("generated src file does not exist", genSrcFile.exists());
 		
 		File classFile = TestUtils.concatPath(BatchTestUtils.getBinFolderName(), "targets", "dispatch", "HasGenClass.class");
 		assertTrue("ordinary src file was not compiled", classFile.exists());
 		
 		File genClassFile = TestUtils.concatPath(BatchTestUtils.getBinFolderName(), "gen", "HgcGen.class");
 		assertTrue("generated src file was not compiled", genClassFile.exists());
	}

