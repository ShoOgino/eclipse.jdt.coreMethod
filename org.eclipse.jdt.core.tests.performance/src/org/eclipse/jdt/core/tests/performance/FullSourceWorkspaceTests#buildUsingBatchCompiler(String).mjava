	/*
	 * Full Build using batch compiler
	 */
	protected File buildUsingBatchCompiler(String options) throws IOException {
		IWorkspace workspace = ResourcesPlugin.getWorkspace();
		final IWorkspaceRoot workspaceRoot = workspace.getRoot();
		final String targetWorkspacePath = workspaceRoot.getProject(JavaCore.PLUGIN_ID).getLocation().toFile().getCanonicalPath();
		final String sources = targetWorkspacePath + File.separator + "compiler";
		final String bins = targetWorkspacePath + File.separator + "bin"; //$NON-NLS-1$
		final String logs = targetWorkspacePath + File.separator + "log.txt"; //$NON-NLS-1$

		// Warm up
		String cmdLine = sources + " -1.4 -g -preserveAllLocals "+(options==null?"":options)+" -d " + bins + " -log " + logs; //$NON-NLS-1$ //$NON-NLS-2$
		for (int i=0; i<2; i++) {
			Main.compile(cmdLine, new PrintWriter(new StringWriter()), new PrintWriter(new StringWriter()));
		}

		// Measures
		int max = MEASURES_COUNT * 2;
		for (int i = 0; i < max; i++) {
			startMeasuring();
			Main.compile(cmdLine, new PrintWriter(new StringWriter()), new PrintWriter(new StringWriter()));
			stopMeasuring();
			cleanupDirectory(new File(bins));
		}
		
		// Commit measures
		commitMeasurements();
		assertPerformance();

		return new File(logs);
	}

