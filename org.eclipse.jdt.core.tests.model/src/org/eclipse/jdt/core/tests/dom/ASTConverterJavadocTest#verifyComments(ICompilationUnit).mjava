	/*
	 * Verify the comments of a compilation unit.
	 */
	protected CompilationUnit verifyComments(ICompilationUnit unit) throws JavaModelException {
		// Get test file
		sourceUnit = unit;
		prefix = unit.getElementName()+": ";

		// Get current project
		String sourceStr = sourceUnit.getSource();
		if (savedOptions != null && !sourceUnit.getJavaProject().getElementName().equals(currentProject.getElementName())) {
			currentProject.setOptions(savedOptions);
			savedOptions = null;
		}
		currentProject = sourceUnit.getJavaProject();
		if (savedOptions == null) savedOptions = currentProject.getOptions(false);

		// set up java project options
		currentProject.setOption(JavaCore.COMPILER_PB_INVALID_JAVADOC, compilerOption);
		currentProject.setOption(JavaCore.COMPILER_PB_MISSING_JAVADOC_TAGS, compilerOption);
		currentProject.setOption(JavaCore.COMPILER_PB_MISSING_JAVADOC_COMMENTS, compilerOption);
		currentProject.setOption(JavaCore.COMPILER_PB_METHOD_WITH_CONSTRUCTOR_NAME, JavaCore.IGNORE);
		currentProject.setOption(JavaCore.COMPILER_DOC_COMMENT_SUPPORT, docCommentSupport);

		// Verify source regardings converted comments
		char[] source = sourceStr.toCharArray();
		String fileName = unit.getPath().toString();
		try {
			return verifyComments(fileName, source);
		}
		catch (RuntimeException ex) {
			TEST_COUNTERS[3]++;
			throw ex;
		}
	}

