private static void initDirectories(StringBuffer buffer) {

	// Verify input directory
	if (!INPUT_DIR.exists() && !INPUT_DIR.isDirectory()) {
		throw new RuntimeException(INPUT_DIR+" does not exist or is not a directory!");
	}

	// Get output dir and clean it if specified
	String dir = System.getProperty("outputDir"); //$NON-NLS-1$
	if (dir != null) {
		int idx = dir.indexOf(',');
		if (idx < 0) {
			setOutputDir(dir, buffer);
		} else {
			setOutputDir(dir.substring(0, idx), buffer);
			if (dir.substring(idx+1).equals("clean")) {
				CLEAN = true;
			}
		}
		if (CLEAN) {
			if (PATCH_BUG != null || JDT_CORE_HEAD) {
				throw new RuntimeException("Reference can only be updated using a version (i.e. with a closed buildnotes_jdt-core.html)!");
			}
		} else if (!OUTPUT_DIR.exists()) {
			System.err.println("            WARNING: The output directory "+OUTPUT_DIR+" does not exist...");
			System.err.println("            => NO comparison could be done!");
			CAN_COMPARE = false;
		}
		try {
            Thread.sleep(1000);
        } catch (InterruptedException e) {
            // skip
        }
	}

	// Get log dir
	try {
		setLogDir(buffer);
	} catch (CoreException e) {
		e.printStackTrace();
	}

	// Get write dir
	String wdir = System.getProperty("writeDir"); //$NON-NLS-1$
	if (wdir != null) {
		WRITE_DIR = new File(wdir);
		if (WRITE_DIR.exists()) {
			Util.delete(WRITE_DIR);
		}
		WRITE_DIR.mkdirs();
		buffer.append("Write dir : ");
		buffer.append(WRITE_DIR);
		buffer.append(LINE_SEPARATOR);
	}
}

