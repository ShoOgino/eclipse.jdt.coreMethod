private static void setOutputDir(String dir) {

	// Find the root of the output directory
	OUTPUT_DIR = new File(dir);
	if (OUTPUT_DIR.getName().equals(INPUT_DIR.getName())) {
		OUTPUT_DIR = OUTPUT_DIR.getParentFile();
	}
	if (OUTPUT_DIR.getName().equals(ECLIPSE_VERSION)) {
		OUTPUT_DIR = OUTPUT_DIR.getParentFile();
	}

	// Compute output sub-directories depending on profiles
	if (NO_COMMENTS || BRACES != null || !JOIN_LINES) {
		OUTPUT_DIR = new File(OUTPUT_DIR, "profiles");
		if (!JOIN_LINES) {
			OUTPUT_DIR = new File(OUTPUT_DIR, "never_join_lines");
		}
		if (NO_COMMENTS) {
			OUTPUT_DIR = new File(OUTPUT_DIR, "no_comments");
		}
		if (BRACES != null) {
			OUTPUT_DIR = new File(new File(OUTPUT_DIR, "braces"), BRACES);
		}
	}

	// Compute the final output dir
	OUTPUT_DIR = new File(new File(OUTPUT_DIR, ECLIPSE_VERSION), INPUT_DIR.getName());
	System.out.println("Output dir: "+OUTPUT_DIR);
}

