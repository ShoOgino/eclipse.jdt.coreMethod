private String cleanPreTags(String comment) {
	if (comment.indexOf("<pre>") < 0) return comment;
	StringTokenizer tokenizer = new StringTokenizer(comment, "\r\n\f");
	StringBuffer buffer = new StringBuffer();
	StringBuffer emptyLines = new StringBuffer();
	String previousLine = null;
	while (tokenizer.hasMoreTokens()) {
		String line = tokenizer.nextToken();
		if (line.trim() == "*") {
			if (previousLine == null || previousLine.indexOf("<pre>") < 0) {
				buffer.append(line);
				buffer.append("\n");
				continue;
			} else {
				emptyLines.append(line);
				emptyLines.append("\n");
			}
		} else if (emptyLines.length() != 0) {
			if (line.indexOf("</pre>") < 0) {
				buffer.append(emptyLines);
				emptyLines.setLength(0);
			}
			buffer.append(line);
			buffer.append("\n");
		} else {
			buffer.append(line);
			buffer.append("\n");
		}
		previousLine = line;
	}
	this.changedPreTags++;
	return buffer.toString();
}

