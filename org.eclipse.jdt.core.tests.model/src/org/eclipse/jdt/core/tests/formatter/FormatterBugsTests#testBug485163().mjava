/**
 * https://bugs.eclipse.org/485163 - [formatter] Incorrect indentation after line wrap
 */
public void testBug485163() {
	this.formatterPrefs.indent_empty_lines = true;
	this.formatterPrefs.blank_lines_before_field = 1;
	String source =
		"public class Test {\r\n" + 
		"\r\n" + 
		"	public String sssss1 = \".................................................\" + \"...........................................\";\r\n" + 
		"	public String sssss2 = \".................................................\" + \"...........................................\";\r\n" + 
		"\r\n" + 
		"	public String sssss3 = \".................................................\" + \"...........................................\";\r\n" + 
		"\r\n" + 
		"	public void foo() {\r\n" + 
		"\r\n" + 
		"		String sssss = \".................................................\" + \"...........................................\";\r\n" + 
		"\r\n" + 
		"		Object o =\r\n" + 
		"\r\n" + 
		"		new Object() {\r\n" + 
		"\r\n" + 
		"			int a;\r\n" + 
		"\r\n" + 
		"			void foo() {\r\n" + 
		"\r\n" + 
		"				String sssss1 = \".................................................\" + \"...........................................\";\r\n" + 
		"\r\n" + 
		"				String sssss2 = \".................................................\" + \"...........................................\";\r\n" + 
		"\r\n" + 
		"			}\r\n" + 
		"\r\n" + 
		"		};\r\n" + 
		"\r\n" + 
		"		new Object() {\r\n" + 
		"\r\n" + 
		"			int a;\r\n" + 
		"\r\n" + 
		"			void foo() {\r\n" + 
		"\r\n" + 
		"				String sssss1 = \".................................................\" + \"...........................................\";\r\n" + 
		"\r\n" + 
		"				String sssss2 = \".................................................\" + \"...........................................\";\r\n" + 
		"\r\n" + 
		"			}\r\n" + 
		"\r\n" + 
		"		};\r\n" + 
		"	}\r\n" + 
		"}";
	formatSource(source,
		"public class Test {\r\n" + 
		"	\r\n" + 
		"	public String sssss1 = \".................................................\"\r\n" + 
		"			+ \"...........................................\";\r\n" + 
		"	\r\n" + 
		"	public String sssss2 = \".................................................\"\r\n" + 
		"			+ \"...........................................\";\r\n" + 
		"	\r\n" + 
		"	public String sssss3 = \".................................................\"\r\n" + 
		"			+ \"...........................................\";\r\n" + 
		"	\r\n" + 
		"	public void foo() {\r\n" + 
		"		\r\n" + 
		"		String sssss = \".................................................\"\r\n" + 
		"				+ \"...........................................\";\r\n" + 
		"		\r\n" + 
		"		Object o =\r\n" + 
		"				\r\n" + 
		"				new Object() {\r\n" + 
		"					\r\n" + 
		"					int a;\r\n" + 
		"					\r\n" + 
		"					void foo() {\r\n" + 
		"						\r\n" + 
		"						String sssss1 = \".................................................\"\r\n" + 
		"								+ \"...........................................\";\r\n" + 
		"						\r\n" + 
		"						String sssss2 = \".................................................\"\r\n" + 
		"								+ \"...........................................\";\r\n" + 
		"						\r\n" + 
		"					}\r\n" + 
		"					\r\n" + 
		"				};\r\n" + 
		"		\r\n" + 
		"		new Object() {\r\n" + 
		"			\r\n" + 
		"			int a;\r\n" + 
		"			\r\n" + 
		"			void foo() {\r\n" + 
		"				\r\n" + 
		"				String sssss1 = \".................................................\"\r\n" + 
		"						+ \"...........................................\";\r\n" + 
		"				\r\n" + 
		"				String sssss2 = \".................................................\"\r\n" + 
		"						+ \"...........................................\";\r\n" + 
		"				\r\n" + 
		"			}\r\n" + 
		"			\r\n" + 
		"		};\r\n" + 
		"	}\r\n" + 
		"}"
	);
}

