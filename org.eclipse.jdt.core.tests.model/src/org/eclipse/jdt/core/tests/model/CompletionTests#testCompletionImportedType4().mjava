public void testCompletionImportedType4() throws JavaModelException {
    ICompilationUnit aType1 = null;
    ICompilationUnit aType2 = null;
    try {
    	aType1 = getWorkingCopy(
	            "/Completion/src/test/imported1/ZZZZ.java",
	            "package test.imported1;"+
	            "public class ZZZZ {\n"+
	            "  \n"+
	            "}");
    	aType2 = getWorkingCopy(
	            "/Completion/src/test/imported2/ZZZZ.java",
	            "package test.imported2;"+
	            "public class ZZZZ {\n"+
	            "  \n"+
	            "}");
    	
    	this.wc = getWorkingCopy(
            "/Completion/src/test/CompletionImportedType4.java",
            "package test;"+
            "import test.imported1.*;"+
            "public class CompletionImportedType4 {"+
            "  ZZZ\n"+
            "}");
	
	    CompletionTestsRequestor2 requestor = new CompletionTestsRequestor2(true);
	    String str = this.wc.getSource();
	    String completeBehind = "ZZZ";
	    int cursorLocation = str.lastIndexOf(completeBehind) + completeBehind.length();
	    this.wc.codeComplete(cursorLocation, requestor, this.owner);
	
		assertResults(
				"ZZZ[POTENTIAL_METHOD_DECLARATION]{ZZZ, Ltest.CompletionImportedType4;, ()V, ZZZ, null, " + (R_DEFAULT + R_INTERESTING + R_NON_RESTRICTED) + "}\n" +
				"ZZZZ[TYPE_REF]{test.imported2.ZZZZ, test.imported2, Ltest.imported2.ZZZZ;, null, null, " + (R_DEFAULT + R_INTERESTING + R_CASE + R_NON_RESTRICTED) + "}\n" +
				"ZZZZ[TYPE_REF]{ZZZZ, test.imported1, Ltest.imported1.ZZZZ;, null, null, " + (R_DEFAULT + R_INTERESTING + R_CASE + R_UNQUALIFIED + R_NON_RESTRICTED) + "}",
				requestor.getResults());
	} finally {
		if(aType1 != null) {
			aType1.discardWorkingCopy();
		}
		if(aType2 != null) {
			aType2.discardWorkingCopy();
		}
	}
}

