/*
 * java search reference for class file reference in case and default blocks
 */
public void testBug542559_009() throws CoreException {
	this.workingCopies = new ICompilationUnit[1];
	this.workingCopies[0] = getWorkingCopy("/JavaSearchBugs/src/X.java",
			"public class X {\n" +
					"	Integer abcd\n" +
					"	public static int foo(int i) {\n" +
					"		final int k;\n" +
					"\n" +
					"		int it = switch (i) { \n" +
					"		case 1  ->   {\n" +
					"			k = 1;\n" +
					"			abcd.toString();\n" +
					"			break k ;\n" +
					"		}\n" +
					"		case 2  ->   {\n" +
					"			abcd.toString();\n" +
					"			break k ;\n" +
					"		}\n" +
					"		default -> {\n" +
					"			k = 3;\n" +
					"			abcd.toString();\n" +
					"			break k;\n" +
					"		}\n" +
					"		};\n" +
					"		return k;\n" +
					"	}\n" +
					"\n" +
					"	public boolean bar() {\n" +
					"		return true;\n" +
					"	}\n" +
					"	public static void main(String[] args) {\n" +
					"		System.out.println(foo(3));\n" +
					"	}\n" +
					"}\n"
			);
	IJavaProject javaProject = this.workingCopies[0].getJavaProject(); //assuming single project for all working copies
	String old = javaProject.getOption(JavaCore.COMPILER_PB_ENABLE_PREVIEW_FEATURES, true);
	try {
		javaProject.setOption(JavaCore.COMPILER_PB_ENABLE_PREVIEW_FEATURES, JavaCore.ENABLED);
		search("abcd", FIELD, REFERENCES);
		assertSearchResults(
				"src/X.java int X.foo(int) [abcd] EXACT_MATCH\n" +
				"src/X.java int X.foo(int) [abcd] EXACT_MATCH\n" +
				"src/X.java int X.foo(int) [abcd] EXACT_MATCH"
		);
	} finally {
		javaProject.setOption(JavaCore.COMPILER_PB_ENABLE_PREVIEW_FEATURES, old);
	}
}

