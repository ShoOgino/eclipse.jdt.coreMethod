public void testCompletionImportedType1() throws JavaModelException {
    ICompilationUnit aType = null;
    try {
    	aType = getWorkingCopy(
	            "/Completion/src/test/imported/ZZZZ.java",
	            "package test.imported;"+
	            "public class ZZZZ {\n"+
	            "  \n"+
	            "}");
    	
    	this.wc = getWorkingCopy(
            "/Completion/src/test/CompletionImportedType1.java",
            "package test;"+
            "public class CompletionImportedType1 {"+
            "  ZZZ\n"+
            "}");
	
	    CompletionTestsRequestor2 requestor = new CompletionTestsRequestor2(true);
	    String str = this.wc.getSource();
	    String completeBehind = "ZZZ";
	    int cursorLocation = str.lastIndexOf(completeBehind) + completeBehind.length();
	    this.wc.codeComplete(cursorLocation, requestor, this.owner);
	
		assertResults(
				"ZZZ[POTENTIAL_METHOD_DECLARATION]{ZZZ, Ltest.CompletionImportedType1;, ()V, ZZZ, null, " + (R_DEFAULT + R_INTERESTING + R_NON_RESTRICTED) + "}\n" +
				"ZZZZ[TYPE_REF]{test.imported.ZZZZ, test.imported, Ltest.imported.ZZZZ;, null, null, " + (R_DEFAULT + R_INTERESTING + R_CASE + R_NON_RESTRICTED) + "}",
				requestor.getResults());
	} finally {
		if(aType != null) {
			aType.discardWorkingCopy();
		}
	}
}

