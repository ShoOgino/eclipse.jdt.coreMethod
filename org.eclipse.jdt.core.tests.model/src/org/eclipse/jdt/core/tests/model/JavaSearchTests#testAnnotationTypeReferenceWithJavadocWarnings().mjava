/**
 * Test search of type references in annotations.
 * Invalid annotation compiler options set to warning.
 */
public void testAnnotationTypeReferenceWithJavadocWarnings() throws CoreException {
	IType type = getCompilationUnit("JavaSearch", "src", "ann01", "YYYY.java").getType("YYYY");
	IJavaProject project = type.getJavaProject();
	Map originalOptions = project.getOptions(true);
	try {
		project.setOption(JavaCore.COMPILER_PB_INVALID_ANNOTATION, JavaCore.WARNING);
		project.setOption(JavaCore.COMPILER_PB_MISSING_ANNOTATION, JavaCore.ENABLED);
		JavaSearchResultCollector resultCollector = new JavaSearchResultCollector();
		new SearchEngine().search(
				getWorkspace(), 
				type,
				REFERENCES, 
				getJavaSearchScope(), 
				resultCollector
				);
		assertSearchResults(
				"src/ann01/XXXX.java boolean ann01.XXXX.foo(int) [YYYY]\n" + 
				"src/ann01/YYYY.java void ann01.YYYY.foo() [YYYY]",
				resultCollector);
	} finally {
		project.setOptions(originalOptions);
	}
}

