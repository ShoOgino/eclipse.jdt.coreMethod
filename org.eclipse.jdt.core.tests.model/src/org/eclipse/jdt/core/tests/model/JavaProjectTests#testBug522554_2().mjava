// unnamed module adds without limiting
public void testBug522554_2() throws CoreException {
	if (!isJRE9) return;
	IJavaProject prj = null;
	try {
		IClasspathAttribute[] jreAttributes = {
			JavaCore.newClasspathAttribute(IClasspathAttribute.ADD_EXPORTS, "java.activation/com.sun.activation.registries=ALL-UNNAMED"),
			JavaCore.newClasspathAttribute(IClasspathAttribute.LIMIT_MODULES,
					"java.se,javafx.base,javafx.controls,javafx.fxml,javafx.graphics,javafx.media,javafx.swing,javafx.web,jdk.accessibility," +
					"jdk.attach,jdk.compiler,jdk.httpserver,jdk.jartool,jdk.javadoc,jdk.jconsole,jdk.jdi,jdk.management,jdk.packager," +
					"jdk.plugin.dom,jdk.sctp,jdk.security.auth,jdk.security.jgss,jdk.unsupported,oracle.desktop,oracle.net,jdk.dynalink," +
					"jdk.incubator.httpclient,jdk.jfr,jdk.jshell,jdk.jsobject,jdk.net,jdk.packager.services,jdk.scripting.nashorn,jdk.xml.dom," +
					"java.activation")
		};
		prj = createJava9ProjectWithJREAttributes("unnamed", new String[] {"src" }, jreAttributes);
		createFolder("/unnamed/src/modify");
		createFile("/unnamed/src/modify/Test.java",
				"package modify;\n" + 
				"\n" + 
				"import com.sun.activation.registries.*; \n" + 
				"\n" + 
				"public class Test {\n" + 
				"	LogSupport logger;\n" + 
				"}\n");
		prj.getProject().getWorkspace().build(IncrementalProjectBuilder.AUTO_BUILD, null);
		IMarker[] markers = prj.getProject().findMarkers(null, true, IResource.DEPTH_INFINITE);
		assertMarkers("Unexpected markers", "",  markers);

		IClasspathEntry systemLibrary = prj.getRawClasspath()[1];
		assertEquals("Should be system library", getJRE9Path(), systemLibrary.getPath());
		String argLine = JavaModelAccess.getModuleCLIOptions(prj, systemLibrary);
		assertEquals("Unexpected CLI options",
				"--add-exports java.activation/com.sun.activation.registries=ALL-UNNAMED " +
				"--add-modules java.activation",
				argLine);
	} finally {
		if (prj != null)
			deleteProject(prj);
	}
}

