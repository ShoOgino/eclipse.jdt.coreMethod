	/**
	 * Get compilation unit source on a file written in UTF-8 charset using UTF-8 encoding for project.
	 * Verification is done by comparing source with file contents read directly with UTF-8 encoding...
	 */
	public void test002() throws JavaModelException, CoreException {

		// Set project encoding
		String encoding = "UTF-8";
		this.encodingProject.setDefaultCharset(encoding);
		
		// Get compilation unit and compare source
		this.utf8Source = getCompilationUnit(this.utf8File.getFullPath().toString());
		String source = this.utf8Source.getSource();
		String encodedContents = new String (Util.getResourceContentsAsCharArray(this.utf8File, encoding));
		assertEquals("Encoded UTF-8 source should have been decoded the same way!", encodedContents, source);

		// Now compare bytes array
		byte[] sourceBytes = null;
		try {
			sourceBytes = source.getBytes(encoding);
		} catch (UnsupportedEncodingException e) {
			throw new RuntimeException(e);
		}
		byte[] encodedBytes = Util.getResourceContentsAsByteArray(this.utf8File);
		assertEquals("Wrong size of encoded string", encodedBytes.length, sourceBytes.length);
		for (int i = 0, max = sourceBytes.length; i < max; i++) {
			assertTrue("Wrong size of encoded character at " + i, sourceBytes[i] == encodedBytes[i]);
		}
	}	

