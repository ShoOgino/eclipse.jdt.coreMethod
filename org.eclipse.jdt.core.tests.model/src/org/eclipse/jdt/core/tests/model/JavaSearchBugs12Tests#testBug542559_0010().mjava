/*
 * java search reference for string constant in switch expression and switch statement
 */
public void testBug542559_0010() throws CoreException {
	this.workingCopies = new ICompilationUnit[1];
	this.workingCopies[0] = getWorkingCopy("/JavaSearchBugs/src/X.java",
			"public class X {\n" +
					"	static final String MONDAY = \"MONDAY\";\n" +
					"	static final String TUESDAY = \"TUESDAY\";\n" +
					"	static final String WEDNESDAY = \"WEDNESDAY\";\n" +
					"	static final String THURSDAY = \"THURSDAY\";\n" +
					"	static final String FRIDAY = \"FRIDAY\";\n" +
					"	static final String SATURDAY = \"SATURDAY\";\n" +
					"	static final String SUNDAY = \"SUNDAY\"; \n" +
					"	@SuppressWarnings(\"preview\")\n" +
					"	public static void main(String[] args) {\n" +
					"		String day = \"MONDAY\";\n" +
					"		switch (day) {\n" +
					"		    case MONDAY, FRIDAY, SUNDAY  -> System.out.println(6);\n" +
					"		    case TUESDAY           		 -> System.out.println(7);\n" +
					"		    case THURSDAY, SATURDAY     -> System.out.println(8);\n" +
					"		    case WEDNESDAY              -> System.out.println(9);\n" +
					"		}\n" +
					"		int k = switch (day) {\n" +
					"	    case SATURDAY  -> throw new NullPointerException();\n" +
					"	    case TUESDAY -> 1;\n" +
					"	    case WEDNESDAY -> {break 10;}\n" +
					"	    default      -> {\n" +
					"	        int g = day.h();\n" +
					"	        int result = f(g);\n" +
					"	        break result;\n" +
					"	    }};\n" +
					"	}\n" +
					"	static int f(int k) {\n" +
					"		return k*k;\n" +
					"	}\n" +
					"}\n"
			);
	IJavaProject javaProject = this.workingCopies[0].getJavaProject(); //assuming single project for all working copies
	String old = javaProject.getOption(JavaCore.COMPILER_PB_ENABLE_PREVIEW_FEATURES, true);
	try {
		javaProject.setOption(JavaCore.COMPILER_PB_ENABLE_PREVIEW_FEATURES, JavaCore.ENABLED);
		search("SATURDAY", FIELD, REFERENCES);
		assertSearchResults(
				"src/X.java void X.main(String[]) [SATURDAY] EXACT_MATCH\n" +
				"src/X.java void X.main(String[]) [SATURDAY] EXACT_MATCH"
		);
	} finally {
		javaProject.setOption(JavaCore.COMPILER_PB_ENABLE_PREVIEW_FEATURES, old);
	}
}

