/**
 * Test several call to creating shared working copy.
 */
public void testShared2() throws JavaModelException {
	ICompilationUnit shared = (ICompilationUnit)this.cu.getSharedWorkingCopy(null, null, null);
	try {
		ICompilationUnit shared2 = (ICompilationUnit)this.cu.getSharedWorkingCopy(null, null, null);
		assertTrue("Second working copy should be identical to first one", shared2 == shared);
	} finally {
		shared.discardWorkingCopy();
		try {
			assertTrue("Primary element should still have shared working copy", this.cu.findSharedWorkingCopy(null) == shared);
		} finally {
			shared.discardWorkingCopy();
		}
	}
	assertTrue("Primary element should not have shared working copy", this.cu.findSharedWorkingCopy(null) == null);
}

