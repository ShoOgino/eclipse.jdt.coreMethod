/**
 * Setting the classpath to empty should result in no entries,
 * and a delta with removed roots.
 */
public void testEmptyClasspath() throws CoreException {
	IJavaProject project = this.createJavaProject("P", new String[] {""}, "");
	try {
		IPackageFragmentRoot[] oldRoots= project.getAllPackageFragmentRoots();

		startDeltas();
		setClasspath(project, new IClasspathEntry[] {});
		IClasspathEntry[] cp= project.getRawClasspath();
		assertTrue("classpath should have no entries", cp.length == 0);

		// ensure the deltas are correct
		assertTrue("there should be a delta", this.deltaListener.deltas != null && this.deltaListener.deltas.length == 1);
		for (int i= 0; i < oldRoots.length; i++) {
			IJavaElementDelta d= null;
			assertTrue("root should be removed", (d= getDeltaFor(oldRoots[i])) != null &&
				(d.getFlags() & IJavaElementDelta.F_REMOVED_FROM_CLASSPATH) > 0);
		} 
	} finally {
		stopDeltas();
		this.deleteProject("P");
	}
}

