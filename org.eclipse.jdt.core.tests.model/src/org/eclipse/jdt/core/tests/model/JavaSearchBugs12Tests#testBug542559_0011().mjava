/*
 * java search a javatype reference from another java project if that is in switch expression
 */
public void testBug542559_0011() throws CoreException {
	try {

		IJavaProject project1 = createJavaProject("JavaSearchBugs12", new String[] {"src"}, new String[] {"JCL12_LIB"}, "bin", "12");
		project1.open(null);
		createFolder("/JavaSearchBugs12/src/pack1");
		createFile("/JavaSearchBugs12/src/pack1/X11.java",
				"package pack1;\n" +
				"public class X11 { \n" +
				"	static final String MONDAY = \"MONDAY\";\n" +
				"	static final String TUESDAY = \"TUESDAY\";\n" +
				"	static final String WEDNESDAY = \"WEDNESDAY\";\n" +
				"	static final String THURSDAY = \"THURSDAY\";\n" +
				"	static final String FRIDAY = \"FRIDAY\";\n" +
				"	static final String SATURDAY = \"SATURDAY\";\n" +
				"	static final String SUNDAY = \"SUNDAY\"; \n" +
				"	@SuppressWarnings(\"preview\")\n" +
				"	public static void main(String[] args) {\n" +
				"		String day = \"MONDAY\";\n" +
				"		switch (day) {\n" +
				"		    case MONDAY, FRIDAY, SUNDAY  -> System.out.println(6);\n" +
				"		    case TUESDAY           		 -> System.out.println(7);\n" +
				"		    case THURSDAY, SATURDAY     -> System.out.println(8);\n" +
				"		    case WEDNESDAY              -> System.out.println(9);\n" +
				"		}\n" +
				"		int k = switch (day) {\n" +
				"	    case SATURDAY  -> throw new NullPointerException();\n" +
				"	    case TUESDAY -> 1;\n" +
				"	    case WEDNESDAY -> {break 10;}\n" +
				"	    default      -> {\n" +
				"	        pack2.X22.a2=99;\n" +
				"	        int result = f(g);\n" +
				"	        break result;\n" +
				"	    }};\n" +
				"	}\n" +
				"	static int f(int k) {\n" +
				"		return k*k;\n" +
				"	}\n" +
				 "}\n");

		IJavaProject project2 = createJavaProject("second", new String[] {"src"},new String[] {"JCL12_LIB"}, "bin", "12");
		project2.open(null);
		createFolder("/second/src/pack2");
		createFile("/second/src/pack2/X22.java",
				"package pack2;\n" +
				"public class X22 {public static int a2=9;}\n");
		addClasspathEntry(project1, JavaCore.newProjectEntry(project2.getPath()));
		project1.close(); // sync
		project2.close();
		project2.open(null);
		project1.open(null);
		IPackageFragment pkg = getPackageFragment("second", "src", "pack2");

		IJavaSearchScope scope = SearchEngine.createJavaSearchScope(new IJavaProject[]
				{getJavaProject("JavaSearchBugs12")});

		search(
			pkg,
			ALL_OCCURRENCES,
			scope,
			this.resultCollector);
		String exp = "src/pack1/X11.java void pack1.X11.main(String[]) [pack2] EXACT_MATCH\n"
		+"src/pack2 pack2 EXACT_MATCH";
		assertSearchResults(
			exp,
			this.resultCollector);

	}
	finally {
		deleteProject("JavaSearchBugs12");
		deleteProject("second");
	}

}

