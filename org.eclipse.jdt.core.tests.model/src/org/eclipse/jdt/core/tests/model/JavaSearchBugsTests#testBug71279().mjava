	/**
	 * Bug 71279: [Search] NPE in TypeReferenceLocator when moving CU with unresolved type reference
	 * @see <a href="https://bugs.eclipse.org/bugs/show_bug.cgi?id=71279">71279</a>
	 */
	public void testBug71279() throws CoreException {
		JavaSearchResultCollector result = new JavaSearchResultCollector() {
		    public void beginReporting() {
		        results.append("Starting search...");
	        }
		    public void endReporting() {
		        results.append("\nDone searching.");
	        }
		};
		ICompilationUnit workingCopy = null;
		try {
			workingCopy = getWorkingCopy("/JavaSearchBugs/src/b71279/AA.java",
				"package b71279;\n" + 
				"public class AA {\n" + 
				"	Unknown ref;\n" + 
				"}\n"
				);
			new SearchEngine().searchDeclarationsOfReferencedTypes(workingCopy, result, null);
			assertSearchResults(
				"Starting search...\n" + 
				"Done searching.",
				result);
		}
		finally {
			if (workingCopy != null)
				workingCopy.discardWorkingCopy();
		}
	}

