private void sortUnit(ICompilationUnit unit, String expectedResult) throws CoreException {
	debug(unit, "BEFORE");
	CompilationUnitSorter.sort(new ICompilationUnit[] { unit }, null, new DefaultJavaElementComparator(), new NullProgressMonitor());
	String sortedSource = unit.getBuffer().getContents();
	assertEquals("Different output", sortedSource, expectedResult);
	CompilationUnitSorter.sort(new ICompilationUnit[] { unit }, null, new DefaultJavaElementComparator(), new NullProgressMonitor());
	String sortedSource2 = unit.getBuffer().getContents();
	debug(unit, "AFTER");
	assertEquals("Different output", sortedSource, sortedSource2);
}

