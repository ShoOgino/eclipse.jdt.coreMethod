protected void deleteProject(String projectName) throws CoreException {
	IProject project = this.getProject(projectName);
	CoreException lastException = null;
	try {
		project.delete(true, null);
	} catch (CoreException e) {
		lastException = e;
	}
	int retryCount = 60; // wait 1 minute at most
	while (project.isAccessible() && --retryCount >= 0) {
		try {
			Thread.sleep(1000);
		} catch (InterruptedException e) {
		}
		try {
			project.delete(true, null);
		} catch (CoreException e) {
			lastException = e;
		}
	}
	if (!project.isAccessible()) return;
	System.err.println("Failed to delete project " + projectName);
	if (lastException != null) {
		throw lastException;
	}
}

