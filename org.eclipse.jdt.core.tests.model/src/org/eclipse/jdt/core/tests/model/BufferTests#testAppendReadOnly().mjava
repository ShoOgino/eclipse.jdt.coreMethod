/**
 * Tests appending to a read-only buffer.
 */
public void testAppendReadOnly() throws CoreException {
	IBuffer buffer = this.createBuffer(
		"P/x/y/A.java",
		"package x.y;\n" +
		"public class A {\n" +
		"}"
	);
	try {
		buffer.getUnderlyingResource().setReadOnly(true);
		buffer.append("\nclass B {}");
		assertTrue("unexpected event", this.event == null);
		assertSourceEquals(
			"unexpected buffer contents",
			"package x.y;\n" +
			"public class A {\n" +
			"}",
			buffer.getContents()
		);
		assertTrue("should not have unsaved changes", !buffer.hasUnsavedChanges());
	} finally {
		buffer.getUnderlyingResource().setReadOnly(false);
		this.deleteBuffer(buffer);
	}
}

