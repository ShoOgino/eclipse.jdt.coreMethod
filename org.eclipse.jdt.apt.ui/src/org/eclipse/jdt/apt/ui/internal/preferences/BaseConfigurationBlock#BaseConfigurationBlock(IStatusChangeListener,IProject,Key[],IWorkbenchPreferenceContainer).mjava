	public BaseConfigurationBlock(IStatusChangeListener context, IProject project, Key[] keys, IWorkbenchPreferenceContainer container) {
		fContext= context;
		fProject= project;
		fAllKeys= keys;
		fContainer= container;
		/*
		if (container == null) {
			fManager= new WorkingCopyManager();
		} else {
			fManager= container.getWorkingCopyManager();
		}
		*/
		// Workaround for Bugzilla 115731 - always use our own WCM.
		fManager = new WorkingCopyManager();
		
		if (fProject != null) {
			fLookupOrder= new IScopeContext[] {
				new ProjectScope(fProject),
				new InstanceScope(),
				new DefaultScope()
			};
			fAptProject = AptPlugin.getAptProject(JavaCore.create(fProject));
		} else {
			fLookupOrder= new IScopeContext[] {
				new InstanceScope(),
				new DefaultScope()
			};
			fAptProject = null;
		}
		
		testIfOptionsComplete(keys);
		if (fProject == null || hasProjectSpecificOptionsNoCache(fProject)) {
			fDisabledProjectSettings= null;
		} else {
			fDisabledProjectSettings= new IdentityHashMap<Key, String>();
			for (int i= 0; i < keys.length; i++) {
				Key curr= keys[i];
				fDisabledProjectSettings.put(curr, curr.getStoredValue(fLookupOrder, false, fManager));
			}
		}
		
		settingsUpdated();
		
		fCheckBoxes= new ArrayList<Button>();
		fComboBoxes= new ArrayList<Combo>();
		fTextBoxes= new ArrayList<Text>(2);
		fLabels= new HashMap<Scrollable, Label>();
		fExpandedComposites= new ArrayList<ExpandableComposite>();
	}

