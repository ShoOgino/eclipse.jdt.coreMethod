    public IJavaCompletionProposal[] getCorrections(IInvocationContext context, IProblemLocation[] locations) throws CoreException {
        
        List<IJavaCompletionProposal> proposals = new ArrayList<IJavaCompletionProposal>();
        
        //Map from error-code to IProblemLocation
        //TODO: creating a second map by plugin id is a little wasteful since
        //we don't check if there is anyone who cares about this. This could be 
        //combined into one data structure.
        ListMap<String, IProblemLocation> locationMapByErrorCode = new ListMap<String, IProblemLocation>();
        ListMap<String, IProblemLocation> locationMapByPluginId = new ListMap<String, IProblemLocation>();
        for (IProblemLocation location : locations)
        {
            
            if (location.getProblemId() == EclipseMessager.APT_QUICK_FIX_PROBLEM_ID)
            {
                String [] arguments = location.getProblemArguments();
                assert arguments.length >= 2;
                String pluginID = arguments[0];
                String errorCode = pluginID + "." + arguments[1]; //$NON-NLS-1$
                
                locationMapByErrorCode.put(errorCode, location);
                locationMapByPluginId.put(errorCode, location);
            }
        }
        
        //Do the errorcode-based dispatch
        for (String errorCode : locationMapByErrorCode.keySet())
        {
            List<IProblemLocation> sortedLocations = locationMapByErrorCode.get(errorCode);
            addProposalsFromProviders(errorCode, context, sortedLocations, proposals);                       
        }
        
        //Do the plugin id-based dispatch
        for (String pluginId : locationMapByPluginId.keySet())
        {
            List<IProblemLocation> sortedLocations = locationMapByPluginId.get(pluginId);
            addProposalsFromProviders(pluginId + "." + "*", context, sortedLocations, proposals);  //$NON-NLS-1$//$NON-NLS-2$
        }
        
        return proposals.toArray(new IJavaCompletionProposal[proposals.size()]);
    }

