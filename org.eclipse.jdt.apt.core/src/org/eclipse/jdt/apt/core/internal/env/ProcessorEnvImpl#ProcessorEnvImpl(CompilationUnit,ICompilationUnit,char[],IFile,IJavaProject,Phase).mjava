    private ProcessorEnvImpl(
    		final CompilationUnit astCompilationUnit,
    		final ICompilationUnit compilationUnit,
    		final char[] source,
    		final IFile file,
    		final IJavaProject javaProj,
    		final Phase phase)
    {
    	super(  astCompilationUnit, file, javaProj, phase );
    	
    	// if we are in reconcile, compilationUnit will be valid
		// if we are in build, file will not be null & compilationUnit will be
		// null
    	assert( (phase == Phase.RECONCILE && compilationUnit != null) || 
    			(phase == Phase.BUILD && compilationUnit == null && file != null ) ) :
    			"Unexpected phase value " + phase ; //$NON-NLS-1$
    	
    	assert (source == null && compilationUnit != null) ||
			   (source != null && compilationUnit == null) : 
	           "Unexpected values for _compilationUnit and _source!"; //$NON-NLS-1$
			   
	   _compilationUnit = compilationUnit;
	   _curSource = source;
	   _filer = new FilerImpl(this);
	   _allProblems = new HashMap<IFile, List<IProblem>>();
	   initOptions(javaProj);
    }

