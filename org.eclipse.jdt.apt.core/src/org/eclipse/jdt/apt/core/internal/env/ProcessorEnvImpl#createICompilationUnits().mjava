	/**
	 * Build <code>ICompilationUnit</code> from the files in this environment.
	 * If a compilation unit cannot be created from a file, the file will be 
	 * dropped from the file list.
	 */
	private void createICompilationUnits(){		
		final int len = _files.length;
		_units = new ICompilationUnit[len];		
		int count = 0;
		for( int i=0; i<len; i++ ){
			_units[i] = JavaCore.createCompilationUnitFrom(_files[i]);
			if( _units[i] != null )
				count ++;
		}
		
		// drop files that doesn't have an ICompilationUnit from the list 
		// and shrink the list of ICompilationUnits.
		if(count != len){
			final IFile[] newFiles = new IFile[count];
			final ICompilationUnit[] newUnits = new ICompilationUnit[count];
			int newIndex = 0;
			for( int i=0; i<len; i++ ){
				if( _units[i] != null ){
					newFiles[newIndex] = _files[i];
					newUnits[newIndex] = _units[i];
					newIndex ++;
				}
			}
			_files = newFiles;
			_units = newUnits;
		}
	}

