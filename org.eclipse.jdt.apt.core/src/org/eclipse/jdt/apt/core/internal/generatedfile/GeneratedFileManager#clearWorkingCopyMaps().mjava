	/**
	 * Clear the working copy maps, that is, the reconcile-time dependency information.
	 * Returns a list of working copies that are no longer referenced and should be
	 * discarded.
	 * <p>
	 * This method affects maps only; it does not touch disk nor create, modify, nor
	 * discard any working copies. This method is atomic with respect to data structure
	 * integrity.
	 * 
	 * @return a list of working copies which must be discarded by the caller
	 */
	private synchronized List<ICompilationUnit> clearWorkingCopyMaps()
	{
		int size = _hiddenBuiltTypes.size() + _workingCopies.size();
		List<ICompilationUnit> toDiscard = new ArrayList<ICompilationUnit>(size);
		toDiscard.addAll(_hiddenBuiltTypes.values());
		toDiscard.addAll(_workingCopies.values());
		_workingCopies.clear();
		_hiddenBuiltTypes.clear();
		_parentToGenWorkingCopies.clear();

		if (AptPlugin.DEBUG_GFM_MAPS) AptPlugin.trace( 
				"cleared working copy dependencies"); //$NON-NLS-1$

		assert checkIntegrity();
		return toDiscard;
	}

