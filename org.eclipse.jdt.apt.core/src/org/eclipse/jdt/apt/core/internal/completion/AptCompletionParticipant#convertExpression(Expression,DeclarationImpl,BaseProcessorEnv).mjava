	private static AptCompletionEvent.CompletionNode convertExpression(final Expression expr,
																	   final DeclarationImpl annotated,
																	   final BaseProcessorEnv env)
	{
		if(expr == null) return null;
		Object value = null;
		final Object constantValue = expr.resolveConstantExpressionValue();		
		if( constantValue != null)
			value = constantValue;
		else if( expr instanceof Name ){
			value = new NameReferenceImpl((Name)expr, env);
		}
		else if( expr instanceof Annotation ){
			final IResolvedAnnotation resolvedAnno = ((Annotation)expr).resolveAnnotation();
			value = Factory.createAnnotationMirror(resolvedAnno, annotated, env);
		}
		if( value == null )
			return null;
		
		return new CompletionNodeImpl(value, expr.getStartPosition(), expr.getLength());
		
	}

