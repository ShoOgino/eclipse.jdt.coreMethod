	private static void addFileWithMissingTypeError(
			final IFile file, 
			final List<IFile> filesWithMissingType,
			final List<char[]> sourceForFilesWithMissingType,
			final ProcessorEnvImpl processorEnv)
	{
		if( processorEnv.getPhase() != Phase.BUILD )
			return;
		final CompilationUnit unit = processorEnv.getAstCompilationUnit(file);
		assert unit != null : "cannot locate compilation unit for " + file.getName(); //$NON-NLS-1$
		final IProblem[] problems = unit.getProblems();
		if(problems == null)
			return;
		for( IProblem problem : problems ){
			if( problem.getID() == IProblem.UndefinedType ){						
				filesWithMissingType.add(file);
				final char[] src = processorEnv.getSourceForFile(file);
				assert src != null : "cannot locate source for file " + file.getName(); //$NON-NLS-1$
				sourceForFilesWithMissingType.add(src);
			}
		}	
	}

