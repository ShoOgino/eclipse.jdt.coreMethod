	/**
	 * Construction can only take place from within 
	 * the factory method, getGeneratedFileManager().
	 */
	private GeneratedFileManager(final IProject project) {
		_project = project;
		_javaProject = JavaCore.create( _project );
		
		// register a preference listener so that we can watch for changes to the gen src dir
		ProjectScope projScope = new ProjectScope(project);
		IEclipsePreferences projPrefs = projScope.getNode(AptPlugin.PLUGIN_ID);
		IPreferenceChangeListener listener = new IPreferenceChangeListener() {
			public void preferenceChange(PreferenceChangeEvent event) {
				if (AptPreferenceConstants.APT_GENSRCDIR.equals(event.getKey())) {
					setGeneratedSourceFolderName( (String)event.getNewValue() );
				}
			}
		};
		projPrefs.addPreferenceChangeListener(listener);
		
		// get generated source dir from config 
		// default value is set in org.eclipse.jdt.apt.core.internal.util.AptCorePreferenceInitializer
		_generatedSourceFolderName = AptConfig.getString( _javaProject, AptPreferenceConstants.APT_GENSRCDIR);
		// properly initialize the GeneratedFileManager if project path is up-to-date and the generated 
		// source folder is there.
		final IFolder folder = project.getFolder(_generatedSourceFolderName);
		if(folder.exists()){
			boolean uptodate = false;
			try{
				uptodate = isProjectClassPathUpToDate(_javaProject, folder.getFullPath(), null);
			}catch(JavaModelException e){
				e.printStackTrace();
			}
			if( uptodate )
				_generatedSourceFolder = folder;
		}	
	}

