	public void setFileProcessing(IFile file){		
		if( file == null )
			throw new IllegalStateException("missing file"); //$NON-NLS-1$
		_batchMode = false;
		if( file.equals(_file) ) // this is a no-op
			return;
		
		_astRoot = null;
		_file = null;
		_unit = null;
		
		// need to match up the file with the ast.
		if( _filesWithAnnotation != null ){
			for( int i=0, len=_filesWithAnnotation.length; i<len; i++ ){
				if( file.equals(_filesWithAnnotation[i]) ){
					_file = file;
					if( _astUnits != null ){
						_astRoot = _astUnits[i];		
						_unit = _units[i];
					}
					else{
						_unit = JavaCore.createCompilationUnitFrom(_filesWithAnnotation[i]);
						_astRoot = createDietAST(_javaProject, _unit);
					}
				}
			}
		}
		
		if( _file == null || _astRoot == null)
			throw new IllegalStateException(
					"file " +  //$NON-NLS-1$
					file.getName() + 
					" is not in the list to be processed."); //$NON-NLS-1$
	}

