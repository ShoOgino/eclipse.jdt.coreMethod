	private static void addFileWithMissingTypeError(
			final IFile file, 
			final List<IFile> filesWithMissingType,
			final List<ICompilationUnit> unitsForFilesWithMissingType,
			final ProcessorEnvImpl processorEnv)
	{
		if( processorEnv.getPhase() != Phase.BUILD )
			return;
		final CompilationUnit domUnit = processorEnv.getAstCompilationUnit(file);
		assert domUnit != null : "cannot locate compilation unit for " + file.getName(); //$NON-NLS-1$
		final IProblem[] problems = domUnit.getProblems();
		if(problems == null)
			return;
		for( IProblem problem : problems ){
			if( problem.getID() == IProblem.UndefinedType ){						
				filesWithMissingType.add(file);
				final ICompilationUnit unit = processorEnv.getICompilationUnitForFile(file);
				assert unit != null : "cannot locate ICompilationUnit for file " + file.getName(); //$NON-NLS-1$
				unitsForFilesWithMissingType.add(unit);
				if( AptPlugin.DEBUG )
					AptPlugin.trace(unit.getElementName() + " has missing type " + problem.getMessage() ); //$NON-NLS-1$
				break;
			}
		}	
	}

