	public static APTResult runAPTDuringBuild(
			final List<AnnotationProcessorFactory> factories, IFile file,
			IJavaProject javaProj) {
		
		//
		//  bail-out early if there aren't factories, or if there aren't any annotation instances
		// 
		if ( factories == null || factories.size() == 0  || ! AptUtil.hasAnnotationInstance( file ) )
		{
			if ( DEBUG ) trace( "runAPTDuringBuild: leaving early because there are no factories or annotation instances");
			Set<IFile> deletedFiles = cleanupAllGeneratedFilesForParent( file );
			if ( deletedFiles.size() == 0 )
				return EMPTY_APT_RESULT;
			else
				return new APTResult( (Set<IFile>)Collections.emptySet(), deletedFiles, (Set<String>)Collections.emptySet() );
		}
					
		ProcessorEnvImpl processorEnv = ProcessorEnvImpl
				.newProcessorEnvironmentForBuild( file, javaProj);
		APTResult result = runAPT(factories, processorEnv);
		return result;
	}

