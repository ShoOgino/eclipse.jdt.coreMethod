		Set<AnnotationTypeDeclaration> computeAnnotationTypes()
		{
			if( _stack instanceof Annotation ){
				final ITypeBinding type = ((Annotation)_stack).resolveAnnotation().getAnnotationType();
				if( type.isAnnotation() ){
					final AnnotationTypeDeclaration decl = 
						(AnnotationTypeDeclaration)Factory.createReferenceType(type, _env);
					return Collections.singleton(decl);
				}
				// should reach here since computerAnnotationStack() would have
				// eliminated this case.
				return null;
			}
			else{
				final Annotation[] annos = (Annotation[])_stack;
				final Set<AnnotationTypeDeclaration> decls = 
					new HashSet<AnnotationTypeDeclaration>(annos.length * 4 / 3 + 1 );
				for( int i=0, len=annos.length; i<len; i++ ){
					final IResolvedAnnotation resolved = annos[i].resolveAnnotation();
					final ITypeBinding type = resolved.getAnnotationType();
					if( type != null && type.isAnnotation() ){
						final AnnotationTypeDeclaration decl =
							(AnnotationTypeDeclaration)Factory.createReferenceType(type, _env);
						decls.add(decl);
					}				
				}
				return decls;
			}
		}

