	/**
	 * Add factory containers to the list for a project.  If the container
	 * is already in the project's list, it will remain but will take on
	 * the new value of the 'enabled' attribute.
	 * The resulting list will be saved to the appropriate settings file.
	 * If there is an error accessing the file an exception will be thrown.
	 * @param jproj a project, or null for the workspace list.
	 * @param adds a map of factory containers to add to the list.  The value
	 * indicates whether the container's factories are to be enabled.
	 */
	public static synchronized void addContainers(
			IJavaProject jproj, Map<FactoryContainer, Boolean> adds) 
			throws CoreException {
		Map<FactoryContainer, Boolean> existing = FactoryPathUtil.getAllContainers(jproj);
		// Iterate over the adds manually in order to detect null
		for (Map.Entry<FactoryContainer, Boolean> e : adds.entrySet()) {
			FactoryContainer fc = e.getKey();
			if (fc == null)
				throw new IllegalArgumentException("Cannot add a null factory container"); //$NON-NLS-1$
			existing.put(fc, e.getValue());
		}
		setContainers(jproj, existing);
	}

