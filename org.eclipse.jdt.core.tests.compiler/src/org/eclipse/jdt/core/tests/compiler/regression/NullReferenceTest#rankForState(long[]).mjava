private int rankForState(long [] state) {
	if (state[0] == 0) {
		if (state[1] == 0) {
			if (state[2] == 0) {
				if (state[3] == 0) {
					return 0; 	// 0000
				}
				else {
					return 1; 	// 0001
				}
			}
			else {
				if (state[3] == 0) {
					return 15;	// 0010
				}
				else {
					return 2;	// 0011
				}
			}
		}
		else {
			if (state[2] == 0) {
				if (state[3] == 0) {
					return 13;	// 0100
				}
				else {
					return 12;	// 0101
				}
			}
			else {
				if (state[3] == 0) {
					return 14;	// 0110
				}
				else {
					return 3;	// 0111
				}
			}
		}
	}
	else {
		if (state[1] == 0) {
			if (state[2] == 0) {
				if (state[3] == 0) {
					return 7;	// 1000
				}
				else {
					return 10;	// 1001
				}
			}
			else {
				if (state[3] == 0) {
					return 8;	// 1010
				}
				else {
					return 9;	// 1011
				}
			}
		}
		else {
			if (state[2] == 0) {
				if (state[3] == 0) {
					return 6;	// 1100
				}
				else {
					return 11;	// 1101
				}
			}
			else {
				if (state[3] == 0) {
					return 5;	// 1110
				}
				else {
					return 4;	// 1111
				}
			}
		}
	}
}

