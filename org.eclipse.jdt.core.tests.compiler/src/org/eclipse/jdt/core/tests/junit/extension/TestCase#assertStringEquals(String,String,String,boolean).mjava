public static void assertStringEquals(String message, String expected, String actual, boolean showLineSeparators) {
	if (expected == null && actual == null)
		return;
	if (expected != null && expected.equals(actual))
		return;
	final String formatted;
	if (message != null) {
		formatted = message+"."; //$NON-NLS-1$
	} else {
		formatted = ""; //$NON-NLS-1$
	}
	if (showLineSeparators) {
		final String expectedWithLineSeparators = showLineSeparators(expected);
		final String actualWithLineSeparators = showLineSeparators(actual);
		throw new ComparisonFailure(
			    formatted
					+ "\n----------- Expected ------------\n" //$NON-NLS-1$
					+ expectedWithLineSeparators
					+ "\n------------ but was ------------\n" //$NON-NLS-1$
					+ actualWithLineSeparators
					+ "\n--------- Difference is ----------\n", //$NON-NLS-1$
			    expectedWithLineSeparators, 
			    actualWithLineSeparators);
	} else {
		throw new ComparisonFailure(
			    formatted
					+ "\n----------- Expected ------------\n" //$NON-NLS-1$
					+ expected
					+ "\n------------ but was ------------\n" //$NON-NLS-1$
					+ actual
					+ "\n--------- Difference is ----------\n", //$NON-NLS-1$
			    expected, 
			    actual);
	}
}

