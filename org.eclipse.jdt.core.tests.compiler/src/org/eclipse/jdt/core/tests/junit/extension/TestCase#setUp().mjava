protected void setUp() throws Exception {
	super.setUp();

	// Store test class and its name when changing
	first = false;
	if (CURRENT_CLASS == null || CURRENT_CLASS != getClass()) {
		if (CURRENT_CLASS != null && RUN_GC) clean();
		CURRENT_CLASS = getClass();
		first = true;
		CURRENT_CLASS_NAME = getClass().getName();
		CURRENT_CLASS_NAME = CURRENT_CLASS_NAME.substring(CURRENT_CLASS_NAME.indexOf(".tests.")+7, CURRENT_CLASS_NAME.length());
	}

	// Memory storage if specified
	if (STORE_MEMORY != null && MEM_LOG_FILE != null) {
		if (ALL_TESTS_LOG && MEM_LOG_FILE.exists()) {
			PrintStream stream = new PrintStream(new FileOutputStream(MEM_LOG_FILE, true));
			stream.print(CURRENT_CLASS_NAME);
			stream.print('\t');
			String testName = getName();
			stream.print(testName);
			stream.print('\t');
			long total = Runtime.getRuntime().totalMemory();
			long used = total - Runtime.getRuntime().freeMemory();
			stream.print(used);
			stream.print('\t');
			stream.print(total);
			stream.print('\t');
			stream.print(Runtime.getRuntime().maxMemory());
			stream.println();
			stream.close();
		}
	}
}

