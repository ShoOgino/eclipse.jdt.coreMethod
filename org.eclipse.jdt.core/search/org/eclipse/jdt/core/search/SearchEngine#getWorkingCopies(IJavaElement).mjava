/**
 * Returns the list of working copies used to do the search on the given java element.
 */
private ICompilationUnit[] getWorkingCopies(IJavaElement element) {
	if (element instanceof IMember) {
		ICompilationUnit cu = ((IMember)element).getCompilationUnit();
		if (cu != null && cu.isWorkingCopy()) {
			ICompilationUnit[] copies = getWorkingCopies();
			int length = copies == null ? 0 : copies.length;
			if (length > 0) {
				ICompilationUnit[] newWorkingCopies = new ICompilationUnit[length+1];
				System.arraycopy(copies, 0, newWorkingCopies, 0, length);
				newWorkingCopies[length] = cu;
				return newWorkingCopies;
			} else {
				return new ICompilationUnit[] {cu};
			}
		}
	}
	return getWorkingCopies();
}

