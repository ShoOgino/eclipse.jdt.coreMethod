/**
 * Returns the underlying resource of the given element.
 */
private IResource getResource(IJavaElement element) throws JavaModelException {
	if (element instanceof IMember) {
		ICompilationUnit cu = ((IMember)element).getCompilationUnit();
		if (cu != null) {
			if (cu.isWorkingCopy()) {
				return cu.getOriginalElement().getUnderlyingResource();
			} else {
				return cu.getUnderlyingResource();
			}
		} 
	} 
	return element.getUnderlyingResource();
}

