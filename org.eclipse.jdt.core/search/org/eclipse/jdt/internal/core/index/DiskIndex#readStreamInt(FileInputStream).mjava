private int readStreamInt(FileInputStream stream) throws IOException {
	int idx = this.bufferIndex;
	this.bufferIndex += 4;
	int bufferSize = BUFFER_READ_SIZE;
	if (this.bufferIndex >= bufferSize) {
		this.bufferIndex -= bufferSize;
		int readSize = this.streamEnd == -1 ? BUFFER_READ_SIZE : this.streamEnd - this.streamPos;
		if (readSize > bufferSize) readSize = bufferSize;
		int val = (streamBuffer[idx++]&0xFF)<<24;
		if (idx == bufferSize) {
			this.streamPos += stream.read(this.streamBuffer, 0, readSize);
			idx = 0;
		}
		val += (streamBuffer[idx++]&0xFF)<<16;
		if (idx == bufferSize) {
			this.streamPos += stream.read(this.streamBuffer, 0, readSize);
			idx = 0;
		}
		val += (streamBuffer[idx++]&0xFF)<<8;
		if (idx == bufferSize) {
			this.streamPos += stream.read(this.streamBuffer, 0, readSize);
			idx = 0;
		}
		val += (streamBuffer[idx++]&0xFF);
		if (idx == bufferSize) {
			this.streamPos += stream.read(this.streamBuffer, 0, readSize);
			idx = 0;
		}
		return val;
	}
	int val = (streamBuffer[idx]&0xFF)<<24;
	val += (streamBuffer[idx+1]&0xFF)<<16;
	val += (streamBuffer[idx+2]&0xFF)<<8;
	return val + (streamBuffer[idx+3]&0xFF);
}

