private int[] readDocumentArray(DataInputStream stream) throws IOException {
	int arraySize = stream.readShort();
	if (arraySize == 0x7FFF)
		arraySize = stream.readInt();
	int[] result = new int[arraySize];
	for (int i = 0; i < arraySize; i++) {
		switch (this.documentReferenceSize) {
			case 1 :
				result[i] = stream.readUnsignedByte();
				break;
			case 2 :
				result[i] = stream.readUnsignedShort();
				break;
			default :
				result[i] = stream.readInt();
				break;
		}
	}
	return result;
}

