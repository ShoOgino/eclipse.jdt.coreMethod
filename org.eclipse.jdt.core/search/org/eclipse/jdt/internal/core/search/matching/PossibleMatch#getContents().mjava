public char[] getContents() {
	if (this.source != null) return this.source;

	this.source = CharOperation.NO_CHAR;
	try {
		if (this.openable instanceof CompilationUnit) {
			if (((CompilationUnit) this.openable).isWorkingCopy()) {
				IBuffer buffer = this.openable.getBuffer();
				if (buffer == null) return null;
				this.source = buffer.getCharacters();
			} else {
				this.source = Util.getResourceContentsAsCharArray((IFile) this.resource);
			}
		} else if (this.openable instanceof ClassFile) {
			SourceMapper sourceMapper = this.openable.getSourceMapper();
			if (sourceMapper != null) {
				String fileName = getSourceFileName();
				if (fileName == NO_SOURCE_FILE_NAME) return null;

				IType type = ((ClassFile) this.openable).getType();
				this.source = sourceMapper.findSource(type, fileName);
			}
		}
	} catch (JavaModelException e) { // ignored
	}
	return this.source;
}

