	public boolean initializeFromLookupEnvironment(LookupEnvironment env) {

		char[][] declaringTypeName = null;
		if ((this.declaringQualification != null)
			&& (this.declaringSimpleName != null)
			&& (this.matchMode == EXACT_MATCH)) {
			char[][] qualification =
				CharOperation.splitOn('.', this.declaringQualification);
			declaringTypeName =
				CharOperation.arrayConcat(qualification, this.declaringSimpleName);
		}
		if (declaringTypeName != null) {
			for (int i = 0, max = declaringTypeName.length; i < max; i++) {
				ReferenceBinding matchingDeclaringType = env.getCachedType(declaringTypeName);
				if (matchingDeclaringType != null && matchingDeclaringType.isValidBinding()) {
					this.declaringTypes = new ReferenceBinding[] { matchingDeclaringType };
					return true;
				}
				// if nothing is in the cache, it could have been a member type (A.B.C.D --> A.B.C$D)
				int last = declaringTypeName.length - 1;
				if (last == 0)
					break;
				declaringTypeName[last - 1] =
					CharOperation.concat(declaringTypeName[last - 1], declaringTypeName[last], '$');
				// try nested type
				declaringTypeName = CharOperation.subarray(declaringTypeName, 0, last);
			}
			return false;
		} else {
			return true;
		}
	}

