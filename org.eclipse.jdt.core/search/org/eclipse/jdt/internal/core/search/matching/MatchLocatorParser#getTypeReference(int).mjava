protected TypeReference getTypeReference(int dim) {
	TypeReference typeRef = super.getTypeReference(dim);
	int patternFineGrain = this.patternLocator.fineGrain();
	if (patternFineGrain == 0 || (this.typeRefFineGrain & patternFineGrain) != 0) {
		this.patternLocator.match(typeRef, this.nodeSet); // NB: Don't check container since type reference can happen anywhere
	}
	return typeRef;
}

