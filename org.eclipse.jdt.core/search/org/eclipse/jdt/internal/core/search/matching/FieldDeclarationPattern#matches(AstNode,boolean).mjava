/**
 * @see SearchPattern#matches(AstNode, boolean)
 */
protected boolean matches(AstNode node, boolean resolve) {
	if (!(node instanceof FieldDeclaration)) return false;

	FieldDeclaration field = (FieldDeclaration)node;
	if (!field.isField()) return false; // ignore field initializers
	
	// field name
	if (!this.matchesName(this.name, field.name))
		return false;

	// declaring type
	FieldBinding binding = field.binding;
	if (resolve && binding != null) {
		ReferenceBinding declaringBinding = binding.declaringClass;
		if (declaringBinding != null && !this.matchesType(this.declaringSimpleName, this.declaringQualification, declaringBinding))
			return false;
	}

	// field type
	if (this.typeQualification == null) {
		TypeReference fieldType = field.type;
		char[][] fieldTypeName = fieldType.getTypeName();
		char[] sourceName = this.toArrayName(
			fieldTypeName[fieldTypeName.length-1], 
			fieldType.dimensions());
		if (!this.matchesName(this.typeSimpleName, sourceName))
			return false;
	} else {
		if (resolve 
				&& binding != null 
				&& !this.matchesType(this.typeSimpleName, this.typeQualification, binding.type))
			return false;
	}
	return true;
}

