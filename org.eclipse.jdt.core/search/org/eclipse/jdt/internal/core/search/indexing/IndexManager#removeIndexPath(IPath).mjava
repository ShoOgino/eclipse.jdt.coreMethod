/**
 * Removes all indexes whose paths start with (or are equal to) the given path. 
 */
public synchronized void removeIndexPath(IPath path) {
	Set entrySet = this.indexes.entrySet();
	Iterator entries = entrySet.iterator();
	String[] locations = null;
	int max = entrySet.size();
	int ptr = 0;
	while (entries.hasNext()) {
		Map.Entry entry = (Map.Entry) entries.next();
		String indexLocation = (String) entry.getKey();
		IPath indexPath = new Path(indexLocation);
		if (path.isPrefixOf(indexPath)) {
			Index index = (Index) entry.getValue();
			if (index != null) index.monitor = null;
			if (locations == null) locations = new String[max];
			locations[ptr++] = indexLocation;
			File indexFile = new File(indexLocation);
			if (indexFile.exists()) {
				indexFile.delete();
			}
		} else if (locations == null) {
			max--;
		}
	}
	if (locations != null) {
		for (int i=0; i<ptr; i++) {
			this.indexes.remove(locations[i]);
		}
		removeIndexesState(locations);
	}
}

