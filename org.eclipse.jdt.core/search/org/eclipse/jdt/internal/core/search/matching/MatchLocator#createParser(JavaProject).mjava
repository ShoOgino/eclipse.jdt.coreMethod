	/**
	 * Create a new parser for the given project, as well as a lookup environment.
	 * Asks the pattern to initialize itself for polymorphic search.
	 */
	public void createParser(JavaProject project) throws JavaModelException {
		if (this.nameEnvironment != null) {
			this.nameEnvironment.cleanup();
		}
		this.nameEnvironment = this.getNameEnvironment(project);
		
		IProblemFactory problemFactory = new DefaultProblemFactory();

		CompilerOptions options = new CompilerOptions(JavaCore.getOptions());
		ProblemReporter problemReporter =
			new ProblemReporter(
				DefaultErrorHandlingPolicies.proceedWithAllProblems(),
				options,
				problemFactory);
		this.lookupEnvironment =
			new LookupEnvironment(this, options, problemReporter, this.nameEnvironment);
		this.parser = new MatchLocatorParser(problemReporter, options.assertMode);
		this.parsedUnits = new HashtableOfObject(10);
		this.nameLookup = project.getNameLookup();
	}

