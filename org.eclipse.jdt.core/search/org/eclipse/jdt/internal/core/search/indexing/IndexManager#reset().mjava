/**
 * Flush current state
 */
public void reset(){

	IWorkspace workspace = ResourcesPlugin.getWorkspace();
	if (workspace != null){
		// force to resolve classpaths for projects to check, so as to avoid running CP variable initializers in the background thread
		this.projectsToCheck = workspace.getRoot().getProjects();
		for (int i = 0, max = this.projectsToCheck == null ? 0 : this.projectsToCheck.length; i < max; i++){
			IJavaProject project = JavaCore.create(this.projectsToCheck[i]);
			try {
				// force to resolve CP variables before calling indexer - 19303 (indirectly through consistency check)
				project.getResolvedClasspath(true);
			} catch (JavaModelException e) {
			}
		} 
	}
	super.reset();
	if (indexes != null){
		indexes = new HashMap(5);
		monitors = new HashMap(5);
	}
	javaPluginLocation = null;
}

