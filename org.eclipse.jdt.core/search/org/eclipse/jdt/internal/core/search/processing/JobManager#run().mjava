/**
 * Infinite loop performing resource indexing
 */
public void run(){

	long idlingStart = -1;
	activateProcessing();				
	while (true){
		try {
			IJob job; 
			if ((job = currentJob()) == null){
				if (idlingStart < 0) idlingStart = System.currentTimeMillis();
				notifyIdle(System.currentTimeMillis() - idlingStart);
				Thread.currentThread().sleep(500);
				continue;
			} else {
				idlingStart = -1;
			}
			if (VERBOSE){
				System.out.println("-> executing: "/*nonNLS*/ + job);
				System.out.println("\t"/*nonNLS*/ + awaitingJobsCount() + " awaiting jobs."/*nonNLS*/);
			}
			try {
				executing = true;
				boolean status = job.execute();
				//if (status == FAILED) request(job);
				moveToNextJob();
			} finally {
				executing = false;
				Thread.currentThread().sleep(50);
			}
		} catch(InterruptedException e){ // background indexing was interrupted
		}
	}
}

