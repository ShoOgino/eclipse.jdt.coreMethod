	private INameEnvironment getNameEnvironment(JavaProject project) throws JavaModelException {
		//return project.getSearchableNameEnvironment();
		
		IPackageFragmentRoot[] roots = project.getAllPackageFragmentRoots();
		int length = roots.length;
		String[] classpathNames = new String[length];
		IWorkspaceRoot workspaceRoot = ResourcesPlugin.getWorkspace().getRoot();
		for (int i = 0; i < length; i++) {
			IPackageFragmentRoot root = roots[i];
			IPath path = root.getPath();
			Object target = JavaModel.getTarget(workspaceRoot, path, false);
			if (target instanceof IResource) {
				classpathNames[i] = ((IResource)target).getLocation().toOSString();
			} else {
				classpathNames[i] = path.toOSString();
			}
		}
		String encoding = (String)JavaCore.getOptions().get(CompilerOptions.OPTION_Encoding);
		if ("".equals(encoding)) { //$NON-NLS-1$
			encoding = null;
		}
		return new FileSystem(classpathNames, new String[0], encoding);
		
	}

