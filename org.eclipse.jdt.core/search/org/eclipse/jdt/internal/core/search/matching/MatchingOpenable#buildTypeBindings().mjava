public void buildTypeBindings() {
	
	// if a parsed unit exits, its bindings have already been built
	if (this.parsedUnit != null) return;
	
	char[] source = this.getSource();
	if (source == null) return;
	this.buildTypeBindings(source);
			
	if (this.openable instanceof org.eclipse.jdt.internal.core.ClassFile) {
		// try to use the main type's class file as the openable
		TypeDeclaration[] types = this.parsedUnit.types;
		if (types != null) {
			String classFileName = openable.getElementName();
			for (int i = 0, length = types.length; i < length; i++) {
				TypeDeclaration typeDeclaration = types[i];
				String simpleTypeName = new String(typeDeclaration.name);
				if (classFileName.startsWith(simpleTypeName)) {
					IPackageFragment parent = (IPackageFragment)openable.getParent();
					this.openable = (Openable)parent.getClassFile(simpleTypeName + ".class"); //$NON-NLS-1$
					break;
				}
			} 
		}
	}
}

