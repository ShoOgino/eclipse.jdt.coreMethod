public void buildTypeBindings() {
	
	// if a parsed unit exits, its bindings have already been built
	if (this.parsedUnit != null) return;
	
	if (openable instanceof CompilationUnit) {
		this.buildTypeBindings(this.getSource());
	} else if (openable instanceof org.eclipse.jdt.internal.core.ClassFile) {
		char[] source = this.locator.findSource((org.eclipse.jdt.internal.core.ClassFile)openable); 
		if (source != null) {
			this.buildTypeBindings(source);
			
			// try to use the main type's class file as the openable
			TypeDeclaration[] types = this.parsedUnit.types;
			if (types != null && types.length > 0) {
				String simpleTypeName = new String(types[0].name);
				IPackageFragment parent = (IPackageFragment)openable.getParent();
				org.eclipse.jdt.core.IClassFile mainTypeClassFile = 
					parent.getClassFile(simpleTypeName + ".class"); //$NON-NLS-1$
				if (mainTypeClassFile.exists()) {
					this.openable = (Openable)mainTypeClassFile;
				} 
			}
		}
	}
}

