	/**
	 * Reports the given reference to the search requestor.
	 * It is done in the given field and given type.
	 * The field's defining types have the given simple names.
	 */
	public void reportReference(
		AstNode reference,
		TypeDeclaration typeDeclaration,
		FieldDeclaration fieldDeclaration,
		char[][] definingTypeNames,
		int accuracy)
		throws CoreException {

		if (fieldDeclaration.isField()) {
			// create defining field handle
			IField field = this.createFieldHandle(fieldDeclaration, definingTypeNames);

			// accept reference
			if (reference instanceof QualifiedNameReference
				|| reference instanceof QualifiedTypeReference) {
				this.pattern.matchReportReference((AstNode) reference, field, accuracy, this);
			} else
				if (reference instanceof MessageSend) {
					// message ref are starting at the selector start
					this.report(
						(int) (((MessageSend) reference).nameSourcePosition >> 32),
						reference.sourceEnd,
						field,
						accuracy);
				} else {
					this.report(reference.sourceStart, reference.sourceEnd, field, accuracy);
				}
		} else { // initializer
			// create defining initializer
			IInitializer initializer =
				this.createInitializerHandle(
					typeDeclaration,
					fieldDeclaration,
					definingTypeNames);

			// accept reference
			if (reference instanceof QualifiedNameReference
				|| reference instanceof QualifiedTypeReference) {
				this.pattern.matchReportReference(
					(AstNode) reference,
					initializer,
					accuracy,
					this);
			} else
				if (reference instanceof MessageSend) {
					// message ref are starting at the selector start
					this.report(
						(int) (((MessageSend) reference).nameSourcePosition >> 32),
						reference.sourceEnd,
						initializer,
						accuracy);
				} else {
					this.report(reference.sourceStart, reference.sourceEnd, initializer, accuracy);
				}
		}
	}

