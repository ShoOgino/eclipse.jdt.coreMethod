/**
 * @see SearchPattern#matchLevel(AstNode, boolean)
 */
public int matchLevel(AstNode node, boolean resolve) {
	if (!(node instanceof TypeReference)) return IMPOSSIBLE_MATCH;

	TypeReference typeRef = (TypeReference)node;
	if (resolve) {
		TypeBinding binding = typeRef.resolvedType;
		if (binding == null) {
			return INACCURATE_MATCH;
		} else {
			return this.matchLevelForType(this.superSimpleName, this.superQualification, binding);
		}
	} else {
		if (this.superSimpleName == null) {
			return this.mustResolve ? POTENTIAL_MATCH : ACCURATE_MATCH;
		} else {
			char[] typeRefSimpleName = null;
			if (typeRef instanceof SingleTypeReference) {
				typeRefSimpleName = ((SingleTypeReference)typeRef).token;
			} else { // QualifiedTypeReference
				char[][] tokens = ((QualifiedTypeReference)typeRef).tokens;
				typeRefSimpleName = tokens[tokens.length-1];
			}				
			if (this.matchesName(this.superSimpleName, typeRefSimpleName))
				return this.mustResolve ? POTENTIAL_MATCH : ACCURATE_MATCH;
			else
				return IMPOSSIBLE_MATCH;
		}
	}
}

