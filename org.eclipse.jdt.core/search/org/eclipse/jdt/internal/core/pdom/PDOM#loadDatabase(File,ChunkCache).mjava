	private void loadDatabase(File dbPath, ChunkCache cache) throws IndexException {
		fPath= dbPath;
		final boolean lockDB= db == null || lockCount != 0;

		clearCaches();
		db = new Database(fPath, cache, getDefaultVersion(), isPermanentlyReadOnly());

		db.setLocked(lockDB);
		if (!isSupportedVersion()) {
			Package.log("Index database is uses an unsupported version " + db.getVersion() 
				+ " Deleting and recreating.", null);
			db.close();
			fPath.delete();
			db = new Database(fPath, cache, getDefaultVersion(), isPermanentlyReadOnly());
			db.setLocked(lockDB);
		}
		db.setLocked(lockCount != 0);
	}

