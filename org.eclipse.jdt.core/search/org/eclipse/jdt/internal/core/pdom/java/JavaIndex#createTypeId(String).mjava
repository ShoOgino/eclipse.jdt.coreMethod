	/**
	 * Returns a type ID or creates a new one if it does not exist. The caller must
	 * attach a reference to it after calling this method or it may leak.
	 */
	public PDOMTypeId createTypeId(String fieldDescriptor) {
		PDOMTypeId existingType = findType(fieldDescriptor);

		if (existingType != null) {
			return existingType;
		}

		int positionOfSeparator = fieldDescriptor.lastIndexOf('$');

		PDOMTypeId result = new PDOMTypeId(this.pdom, fieldDescriptor);

		if (positionOfSeparator != -1) {
			result.setDeclaringType(createTypeId(fieldDescriptor.substring(0, positionOfSeparator)));
		}

		return result;
	}

