	/**
	 * Runs the Java code formatter application
	 */
	public Object run(Object args) throws Exception {
		File[] filesToFormat = processCommandLine((String[]) args);

		if (filesToFormat == null) {
			return EXIT_OK;
		}

		if (!this.quiet) {
			if (this.configName != null) {
				System.out.println(Messages.bind(Messages.CommandLineConfigFile, this.configName));
			}
			System.out.println(Messages.bind(Messages.CommandLineStart));
		}

		// format the list of files and/or directories
		final CodeFormatter codeFormatter = ToolFactory.createCodeFormatter(this.options);
		for (int i = 0, max = filesToFormat.length; i < max; i++) {
			final File file = filesToFormat[i];
			if (file.isDirectory()) {
				formatDirTree(file, codeFormatter);
			} else if (Util.isJavaLikeFileName(file.getPath())) {
				formatFile(file, codeFormatter);
			}			
		}
		if (!this.quiet) {
			System.out.println(Messages.bind(Messages.CommandLineDone));
		}

		return EXIT_OK;
	}

