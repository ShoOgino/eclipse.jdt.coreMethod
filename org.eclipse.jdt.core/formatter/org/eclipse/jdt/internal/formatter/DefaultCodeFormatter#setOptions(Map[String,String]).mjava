	@Override
	public void setOptions(Map<String, String> options) {
		this.options = options;
		Map<String, String> formatterPrefs = new HashMap<String, String>(options.size());
		for (String key : options.keySet()) {
			Object value = options.get(key);
			if (value instanceof String) {
				formatterPrefs.put(key, (String) value);
			}
		}
		this.preferences = new DefaultCodeFormatterOptions(formatterPrefs);
		setDefaultCompilerOptions();
	}

