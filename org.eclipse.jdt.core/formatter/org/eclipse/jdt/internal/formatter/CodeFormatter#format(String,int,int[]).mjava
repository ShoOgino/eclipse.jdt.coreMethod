	/** 
	 * Formats the char array <code>sourceString</code>,
	 * and returns a string containing the formatted version.
	 * The positions array is modified to contain the mapped positions.
	 * @param string the string to format
	 * @param indentationLevel the initial indentation level
	 * @param positions the array of positions to map
	 * @return the formatted ouput.
	 */
	public String format(String string, int indentationLevel, int[] positions) {
		// XXX temporary inefficient implementation to meet API
		if (positions != null) {
			this.setPositionsToMap(positions);
			this.setInitialIndentationLevel(indentationLevel);
			String formattedString = this.formatSourceString(string);
			int[] mappedPositions = this.getMappedPositions();
			System.arraycopy(mappedPositions, 0, positions, 0, positions.length);
			return formattedString;
		} else {
			this.setInitialIndentationLevel(indentationLevel);
			return this.formatSourceString(string);
		}
	}	

