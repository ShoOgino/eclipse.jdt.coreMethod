	// location to align and break on.
	public Alignment(String name, int mode, int tieBreakRule, Scribe scribe, int fragmentCount, int sourceRestart, int continuationIndent){
		
		this.name = name;
		this.location = new Location(scribe, sourceRestart);
		this.mode = mode;
		this.tieBreakRule = tieBreakRule;
		this.fragmentCount = fragmentCount;
		this.scribe = scribe;
		this.originalIndentationLevel = this.scribe.indentationLevel;
		this.wasSplit = false;
		
		// initialize the break indentation level, using modes and continuationIndentationLevel preference
		int indentSize = this.scribe.useTab ? 1 : this.scribe.tabSize;
		int currentColumn = this.location.outputColumn;
		if (currentColumn == 1) {
		    currentColumn = this.location.outputIndentationLevel * (this.scribe.useTab ?  this.scribe.tabSize : 1) + 1;
		}
		
		if ((mode & M_INDENT_ON_COLUMN) != 0) {
			// indent broken fragments at next indentation level, based on current column
			this.breakIndentationLevel = this.scribe.getNextIndentationLevel(currentColumn);
		} else if ((mode & M_INDENT_BY_ONE) != 0) {
			// indent broken fragments exactly one level deeper than current indentation
			this.breakIndentationLevel = this.location.outputIndentationLevel + indentSize;
		} else {
			// indent broken fragments by one continuation indentation deeper than current indentation
			this.breakIndentationLevel = this.location.outputIndentationLevel + (continuationIndent * (this.scribe.useTab ?  1 : this.scribe.tabSize));
		}
		// reduce indentation of broken fragment in case first fragment would be before the subsequent ones
		if ((mode & M_NEXT_SHIFTED_SPLIT) != 0) {
			int firstFragmentNextIndentationLevel =  this.scribe.getNextIndentationLevel(currentColumn);
			if (firstFragmentNextIndentationLevel < this.breakIndentationLevel) {
				this.breakIndentationLevel = firstFragmentNextIndentationLevel;
			}
		}
		this.shiftBreakIndentationLevel = this.breakIndentationLevel + indentSize;

		this.fragmentIndentations = new int[this.fragmentCount];
		this.fragmentBreaks = new int[this.fragmentCount];

		// check for forced alignments
		if ((this.mode & M_FORCE) != 0) {
			couldBreak();
		}					
	}

