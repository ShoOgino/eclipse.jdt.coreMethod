	/**
	 * @see CodeFormatter#format(int, String, int, int[], String, Map)
	 */
	public String format(
			int kind,
			String source,
			int indentationLevel,
			int[] positions,
			String lineSeparator,
			Map options) {

		String result = source;				
		switch(kind) {
			case K_CLASS_BODY_DECLARATIONS :
				result = formatClassBodyDeclarations(source, indentationLevel, positions, lineSeparator, options);
				break;
			case K_COMPILATION_UNIT :
				result = formatCompilationUnit(source, indentationLevel, positions, lineSeparator, options);
				break;
			case K_EXPRESSION :
				result = formatExpression(source, indentationLevel, positions, lineSeparator, options);
				break;
			case K_STATEMENTS :
				result = formatStatements(source, indentationLevel, positions, lineSeparator, options);
				break;
			case K_UNKNOWN :
				result = probeFormatting(source, indentationLevel, positions, lineSeparator, options);
		}
		this.positionsMapping = positions;
		return result;
	}

