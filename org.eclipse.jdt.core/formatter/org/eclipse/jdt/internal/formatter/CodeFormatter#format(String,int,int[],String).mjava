	public String format(String string, int indentationLevel, int[] positions, String lineSeparator) {
		if (lineSeparator != null){
			this.options.setLineSeparator(lineSeparator);
		}
		if (positions != null) {
			this.setPositionsToMap(positions);
			this.setInitialIndentationLevel(indentationLevel);
			String formattedString = this.formatSourceString(string);
			int[] mappedPositions = this.getMappedPositions();
			System.arraycopy(mappedPositions, 0, positions, 0, positions.length);
			return formattedString;
		} else {
			this.setInitialIndentationLevel(indentationLevel);
			return this.formatSourceString(string);
		}
	}	

