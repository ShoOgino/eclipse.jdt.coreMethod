/**
 * Returns the number of characters and tab char between the beginning of the line
 * and the beginning of the comment.
 */
private int getCurrentCommentOffset() {
	int linePtr = scanner.linePtr;
	// if there is no beginning of line, return 0.
	if (linePtr < 0)
		return 0;
	int offset = 0;
	int beginningOfLine = scanner.lineEnds[linePtr];
	int currentStartPosition = scanner.startPosition;
	char[] source = scanner.source;
	
	// find the position of the beginning of the line containing the comment
	while (beginningOfLine > currentStartPosition) {
		if (linePtr > 0) {
			beginningOfLine = scanner.lineEnds[--linePtr];
		} else {
			beginningOfLine = 0;
			break;
		}
	}

	for (int i = beginningOfLine ; i < currentStartPosition ; i++){
		char currentCharacter = source[i];
		switch(currentCharacter){
			case '\t':
				offset += options.tabSize;
			case '\n':
			case '\r':
				break;
			default:
				offset++;
		}
	}
	
	return offset;
}

