	/**
	 * @see org.eclipse.jdt.core.ICodeFormatter#format(String, int, int[], String)
	 */
	public String format(
		String source,
		int indentationLevel,
		int[] positions,
		String lineSeparator) {
		
		TextEdit textEdit = probeFormatting(source, indentationLevel, lineSeparator, 0, source.length());
		if (textEdit == null) {
			return source;
		} else {
			Document document = new Document(source);
			try {
				textEdit.apply(document, TextEdit.UPDATE_REGIONS);
			} catch (MalformedTreeException e) {
				e.printStackTrace();
			} catch (BadLocationException e) {
				e.printStackTrace();
			}
			return document.get();
		}
	}

