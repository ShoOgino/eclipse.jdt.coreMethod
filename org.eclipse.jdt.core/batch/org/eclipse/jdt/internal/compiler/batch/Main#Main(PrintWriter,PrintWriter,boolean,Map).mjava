public Main(PrintWriter outWriter, PrintWriter errWriter, boolean systemExitWhenFinished, Map customDefaultOptions) {
	this.logger = new Logger(outWriter, errWriter);
	this.out = outWriter;
	this.systemExitWhenFinished = systemExitWhenFinished;
	this.options = new CompilerOptions().getMap();
	if (customDefaultOptions != null) {
		this.didSpecifySource = customDefaultOptions.get(CompilerOptions.OPTION_Source) != null;
		this.didSpecifyTarget = customDefaultOptions.get(CompilerOptions.OPTION_TargetPlatform) != null;
		for (Iterator iter = customDefaultOptions.keySet().iterator(); iter.hasNext();) {
			Object key = iter.next();
			this.options.put(key, customDefaultOptions.get(key));
		}
	} else {
		this.didSpecifySource = false;
		this.didSpecifyTarget = false;
	}
}

