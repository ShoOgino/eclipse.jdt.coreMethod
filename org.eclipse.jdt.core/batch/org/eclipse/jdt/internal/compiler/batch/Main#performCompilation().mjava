	/*
	 *  Low-level API performing the actual compilation
	 */
	public void performCompilation() throws InvalidInputException {

		this.startTime = System.currentTimeMillis();

		INameEnvironment environment = getLibraryAccess();
		Compiler batchCompiler =
			new Compiler(
				environment,
				getHandlingPolicy(),
				this.options,
				getBatchRequestor(),
				getProblemFactory());
		CompilerOptions compilerOptions = batchCompiler.options;

		// set the non-externally configurable options.
		compilerOptions.setVerboseMode(this.verbose);
		compilerOptions.produceReferenceInfo(this.produceRefInfo);
		batchCompiler.compile(getCompilationUnits());

		printStats();
		
		// cleanup
		environment.cleanup();
	}

