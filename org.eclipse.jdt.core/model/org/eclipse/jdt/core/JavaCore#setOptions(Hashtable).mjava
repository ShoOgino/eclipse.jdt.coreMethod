	/**
	 * Sets the current table of options. All and only the options explicitly included in the given table 
	 * are remembered; all previous option settings are forgotten, including ones not explicitly
	 * mentioned.
	 * <p>
	 * For a complete description of the configurable options, see <code>getDefaultOptions</code>.
	 * </p>
	 * 
	 * @param newOptions the new options (key type: <code>String</code>; value type: <code>String</code>),
	 *   or <code>null</code> to reset all options to their default values
	 * @see JavaCore#getDefaultOptions()
	 *///TODO should use a Map for 3.0
	public static void setOptions(Hashtable newOptions) {
		
		// see #initializeDefaultPluginPreferences() for changing default settings
		Preferences preferences = getPlugin().getPluginPreferences();

		if (newOptions == null){
			newOptions = JavaCore.getDefaultOptions();
		}
		Enumeration keys = newOptions.keys();
		while (keys.hasMoreElements()){
			String key = (String)keys.nextElement();
			if (!JavaModelManager.OptionNames.contains(key)) continue; // unrecognized option
			if (key.equals(CORE_ENCODING)) continue; // skipped, contributed by resource prefs
			String value = (String)newOptions.get(key);
			preferences.setValue(key, value);
		}

		// Backward compatibility
		String[] propertyNames = preferences.propertyNames();
		for (int i = 0; i < propertyNames.length; i++){
			String propertyName = propertyNames[i];
			// bug 45112
			if (CompilerOptions.OPTION_ReportInvalidAnnotation.equals(propertyName)) {
				preferences.setToDefault(OLD_COMPILER_PB_INVALID_ANNOTATION);
			}
			else if (CompilerOptions.OPTION_ReportMissingAnnotation.equals(propertyName)) {
				preferences.setToDefault(OLD_COMPILER_PB_MISSING_ANNOTATION);
			}
			// end bug 45112
			// bug 46854
			else if (CompilerOptions.OPTION_ReportMissingJavadoc.equals(propertyName)) {
				preferences.setToDefault(OLD_COMPILER_PB_MISSING_JAVADOC);
			}
			// end bug 46854
		}

		// persist options
		getPlugin().savePluginPreferences();
	}

