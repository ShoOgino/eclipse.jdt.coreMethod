/**
 * Creates and returns a compilation unit element for
 * the given <code>.java</code> file. Returns <code>null</code> if unable
 * to recognize the compilation unit.
 */
public static ICompilationUnit createCompilationUnitFrom(IFile file) {
	IProject fileProject = file.getProject();
	IJavaProject project = (IJavaProject) create(fileProject);
	IPackageFragment pkg= (IPackageFragment)determineIfOnClasspath(file, project);
	if (pkg == null) {
		// fix for 1FVS7WE
		// not on classpath - make the root its folder, and a default package
		IPackageFragmentRoot root= project.getPackageFragmentRoot(file.getParent());
		pkg= root.getPackageFragment(IPackageFragment.DEFAULT_PACKAGE_NAME);
	} 
	return pkg.getCompilationUnit(file.getName());
}

