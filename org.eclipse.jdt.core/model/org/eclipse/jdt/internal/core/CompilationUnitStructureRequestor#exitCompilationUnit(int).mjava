/**
 * @see ISourceElementRequestor
 */
public void exitCompilationUnit(int declarationEnd) {
	fUnitInfo.setSourceLength(declarationEnd + 1);

	// make the reference arrays the correct size
	if (fRefCount != fReferenceKinds.length) {
		byte[] kinds= new byte[fRefCount];
		System.arraycopy(fReferenceKinds, 0, kinds, 0, fRefCount);
		fReferenceKinds= kinds;
		char[][] names= new char[fRefCount][];
		System.arraycopy(fReferenceNames, 0, names, 0, fRefCount);
		fReferenceNames= names;
	}
	fUnitInfo.setReferenceInfo(new ReferenceInfo(fReferenceNames, fReferenceKinds));

	// determine if there were any parsing errors
	fUnitInfo.setIsStructureKnown(true);
	if (fProblems != null) {
		for (int i= 0; i < fProblems.size(); i++) {
			IProblem problem= (IProblem)fProblems.get(i);
			if (!problem.isWarning()) {
				fUnitInfo.setIsStructureKnown(false);
				break;
			}
		}
	}
}

