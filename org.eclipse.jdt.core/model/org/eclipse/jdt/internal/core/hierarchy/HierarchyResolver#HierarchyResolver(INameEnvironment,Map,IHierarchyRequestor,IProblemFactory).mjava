public HierarchyResolver(INameEnvironment nameEnvironment, Map settings, IHierarchyRequestor requestor, IProblemFactory problemFactory) {
	// create a problem handler with the 'exit after all problems' handling policy
	options = settings == null ? new CompilerOptions() : new CompilerOptions(settings);
	IErrorHandlingPolicy policy = DefaultErrorHandlingPolicies.exitAfterAllProblems();
	ProblemReporter problemReporter = new ProblemReporter(policy, options, problemFactory);

	this.setEnvironment(
		new LookupEnvironment(this, options, problemReporter, nameEnvironment),
		requestor);
}

