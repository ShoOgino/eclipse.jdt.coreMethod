	/**
	 * Generic processing for an element that has been added:<ul>
	 * <li>The element is added to its parent's cache of children
	 * <li>The element is closed (to ensure consistency)
	 * <li>An entry is made in the delta reporting it as added (ADDED).
	 * </ul>
	 * <p>
	 * If the element is an archive, and it has just been added, it may not be specified
	 * on the project's classpath. In this case, the new element is not added as a child
	 * of its parent (since only package fragment roots on the classpath are considered to
	 * be children of a project).
	 */
	protected void basicElementAdded(Openable element, IResourceDelta delta) {

		if (isOpen(delta.getResource())) {

			switch (element.getElementType()) {
				case IJavaElement.PACKAGE_FRAGMENT_ROOT :
					// when a root is added, and is on the classpath, the project must be updated
					JavaProject project = (JavaProject) element.getJavaProject();
					project.updatePackageFragmentRoots();
					//updateProject(project);
					//try {
					//	project.getJavaProjectElementInfo().setNameLookup(null);
					//} catch (JavaModelException e) {
					//}
					break;
				case IJavaElement.PACKAGE_FRAGMENT :
					addToParentInfo(element);
					project = (JavaProject) element.getJavaProject();
					try {
						project.getJavaProjectElementInfo().setNameLookup(null);
					} catch (JavaModelException e) {
					}
					break;
				default:
					addToParentInfo(element);
			}

			close(element);
			fCurrentDelta.added(element);
		}
	}

