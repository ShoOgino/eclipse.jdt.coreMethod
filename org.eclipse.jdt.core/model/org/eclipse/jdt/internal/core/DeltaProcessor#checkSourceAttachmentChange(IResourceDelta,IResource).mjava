	private void checkSourceAttachmentChange(IResourceDelta delta, IResource res) {
		IPath rootPath = (IPath)this.sourceAttachments.get(res.getFullPath());
		if (rootPath != null) {
			IJavaProject projectOfRoot = (IJavaProject)this.roots.get(rootPath);
			if (projectOfRoot != null) {
				IPackageFragmentRoot root = projectOfRoot.getPackageFragmentRoot(ResourcesPlugin.getWorkspace().getRoot().getFile(rootPath));
				try {
					// close the root so that source attachement cache is flushed
					root.close();
				} catch (JavaModelException e) {
				}
				switch (delta.getKind()) {
					case IResourceDelta.ADDED:
						fCurrentDelta.sourceAttached(root);
						break;
					case IResourceDelta.CHANGED:
						fCurrentDelta.sourceDetached(root);
						fCurrentDelta.sourceAttached(root);
						break;
					case IResourceDelta.REMOVED:
						fCurrentDelta.sourceDetached(root);
						break;
				}
			} 
		}
	}

