/**
 * @see IBuffer
 */
public void setContents(String contents) {
	// allow special case for first initialization 
	// after creation by buffer factory
	if (fContents == null) {
		fContents = contents.toCharArray();
		fFlags &= ~ (F_HAS_UNSAVED_CHANGES);
		return;
	}
	
	if (!isReadOnly()) {
		char[] charContents = null;
		if (contents != null) {
			charContents = contents.toCharArray();
		}
		BufferChangedEvent event = new BufferChangedEvent(this, 0, this.getLength(), contents);
		synchronized (fLock) {
			fContents = charContents;
			fFlags |= F_HAS_UNSAVED_CHANGES;
			fGapStart = -1;
			fGapEnd = -1;
		}
		notifyChanged(event);
	}
}

