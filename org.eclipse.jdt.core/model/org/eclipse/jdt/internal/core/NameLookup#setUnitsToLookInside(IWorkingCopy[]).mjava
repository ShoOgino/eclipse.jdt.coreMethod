/**
 * Remembers a set of compilation units that will be looked inside
 * when looking up a type. If they are working copies, they take
 * precedence of their compilation units.
 * <code>null</code> means that no special compilation units should be used.
 */
public void setUnitsToLookInside(IWorkingCopy[] unitsToLookInside) {
	
	Thread currentThread = Thread.currentThread();
	if (unitsToLookInside == null) {
		this.unitsToLookInside.put(currentThread, null);
	} else {
		Map workingCopies = (Map)this.unitsToLookInside.get(currentThread);
		if (workingCopies == null){
			this.unitsToLookInside.put(currentThread, workingCopies = new HashMap());
		}
		for (int i = 0, length = unitsToLookInside.length; i < length; i++) {
			IWorkingCopy unitToLookInside = unitsToLookInside[i];
			ICompilationUnit original = (ICompilationUnit)unitToLookInside.getOriginalElement();
			if (original != null) {
				workingCopies.put(original, unitToLookInside);
			} else {
				workingCopies.put(unitToLookInside, unitToLookInside);
			}
		}
	}
}

