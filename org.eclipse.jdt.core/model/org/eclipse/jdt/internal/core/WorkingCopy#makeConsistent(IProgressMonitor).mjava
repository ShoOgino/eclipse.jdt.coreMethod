/**
 * @see IOpenable#makeConsistent(IProgressMonitor)
 */
public void makeConsistent(IProgressMonitor monitor) throws JavaModelException {

	this.computeProblems = this.problemRequestor != null && this.problemRequestor.isActive();

	WorkingCopyElementInfo info = null;
	JavaModelManager manager = JavaModelManager.getJavaModelManager();
	synchronized(manager){
		if (isConsistent()) return;

		// create a new info and make it the current info
		info = (WorkingCopyElementInfo)createElementInfo();
		buildStructure(info, monitor);
	}
	
	// report problems outside the JavaModelManager lock
	if (monitor != null && monitor.isCanceled()) return;
	reportProblemsIfNeeded(info);
}

