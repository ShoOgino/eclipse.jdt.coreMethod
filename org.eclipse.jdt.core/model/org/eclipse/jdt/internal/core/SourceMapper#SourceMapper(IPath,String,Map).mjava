	/**
	 * Creates a <code>SourceMapper</code> that locates source in the zip file
	 * at the given location in the specified package fragment root.
	 */
	public SourceMapper(IPath sourcePath, String rootPath, Map options) {
		this.options = options;
		this.encoding = (String)options.get(JavaCore.CORE_ENCODING);
		this.sourcePath = sourcePath;
		if (rootPath == null) {
			rootPath = this.computeRootPath();
		}
		if (rootPath != null) {
			rootPath = rootPath.replace('\\', '/');
			if (rootPath.endsWith("/" )) { //$NON-NLS-1$
				rootPath = rootPath.substring(0, rootPath.lastIndexOf('/'));
			}
		}
		this.rootPath = rootPath;
		this.fSourceRanges = new HashMap();
		this.fParameterNames = new HashMap();
		this.importsTable = new HashMap();
		this.importsCounterTable = new HashMap();
	}

