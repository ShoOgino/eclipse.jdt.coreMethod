/** 
 * Returns a string representation of this delta's
 * structure suitable for debug purposes.
 *
 * @see toString
 */
public String toDebugString(int depth) {
	StringBuffer buffer = new StringBuffer();
	for (int i= 0; i < depth; i++) {
		buffer.append('\t');
	}
	buffer.append(((JavaElement)getElement()).toDebugString());
	buffer.append("["/*nonNLS*/);
	switch (getKind()) {
		case IJavaElementDelta.ADDED :
			buffer.append('+');
			break;
		case IJavaElementDelta.REMOVED :
			buffer.append('-');
			break;
		case IJavaElementDelta.CHANGED :
			buffer.append('*');
			break;
		default :
			buffer.append('?');
			break;
	}
	buffer.append("]: {"/*nonNLS*/);
	int changeFlags = getFlags();
	boolean prev = false;
	if ((changeFlags & IJavaElementDelta.F_CHILDREN) != 0) {
		if (prev)
			buffer.append(" | "/*nonNLS*/);
		buffer.append("CHILDREN"/*nonNLS*/);
		prev = true;
	}
	if ((changeFlags & IJavaElementDelta.F_CONTENT) != 0) {
		if (prev)
			buffer.append(" | "/*nonNLS*/);
		buffer.append("CONTENT"/*nonNLS*/);
		prev = true;
	}
	if ((changeFlags & IJavaElementDelta.F_MOVED_FROM) != 0) {
		if (prev)
			buffer.append(" | "/*nonNLS*/);
		buffer.append("MOVED_FROM("/*nonNLS*/ + ((JavaElement)getMovedFromElement()).toDebugString() + ")"/*nonNLS*/);
		prev = true;
	}
	if ((changeFlags & IJavaElementDelta.F_MOVED_TO) != 0) {
		if (prev)
			buffer.append(" | "/*nonNLS*/);
		buffer.append("MOVED_TO("/*nonNLS*/ + ((JavaElement)getMovedToElement()).toDebugString() + ")"/*nonNLS*/);
		prev = true;
	}
	if ((changeFlags & IJavaElementDelta.F_ADDED_TO_CLASSPATH) != 0) {
		if (prev)
			buffer.append(" | "/*nonNLS*/);
		buffer.append("ADDED TO CLASSPATH"/*nonNLS*/);
		prev = true;
	}
	if ((changeFlags & IJavaElementDelta.F_REMOVED_FROM_CLASSPATH) != 0) {
		if (prev)
			buffer.append(" | "/*nonNLS*/);
		buffer.append("REMOVED FROM CLASSPATH"/*nonNLS*/);
		prev = true;
	}
	if ((changeFlags & IJavaElementDelta.F_CLASSPATH_REORDER) != 0) {
		if (prev)
			buffer.append(" | "/*nonNLS*/);
		buffer.append("REORDERED IN CLASSPATH"/*nonNLS*/);
		prev = true;
	}
	if ((changeFlags & IJavaElementDelta.F_MODIFIERS) != 0) {
		if (prev)
			buffer.append(" | "/*nonNLS*/);
		buffer.append("MODIFIERS CHANGED"/*nonNLS*/);
		prev = true;
	}
	if ((changeFlags & IJavaElementDelta.F_SUPER_TYPES) != 0) {
		if (prev)
			buffer.append(" | "/*nonNLS*/);
		buffer.append("SUPER TYPES CHANGED"/*nonNLS*/);
		prev = true;
	}
	buffer.append("}"/*nonNLS*/);
	IJavaElementDelta[] children = getAffectedChildren();
	if (children != null) {
		for (int i = 0; i < children.length; ++i) {
			buffer.append("\n"/*nonNLS*/);
			buffer.append(((JavaElementDelta) children[i]).toDebugString(depth + 1));
		}
	}
	return buffer.toString();
}

