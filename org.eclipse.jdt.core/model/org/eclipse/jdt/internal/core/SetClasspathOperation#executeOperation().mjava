/**
 * Sets the classpath of the pre-specified project.
 */
protected void executeOperation() throws JavaModelException {
	beginTask(Util.bind("classpath.settingProgress"/*nonNLS*/), 2);
	JavaProject project= ((JavaProject) getElementsToProcess()[0]);
	
	project.setRawClasspath0(this.newRawPath);

	// change builder specs to build in the order given by the new classpath
	JavaModelManager manager = project.getJavaModelManager();
	manager.setBuildOrder(((JavaModel) project.getJavaModel()).computeBuildOrder(true));

	// flush markers
	project.flushClasspathProblemMarkers();

	// resolve new path (asking for marker creation if problems)
	IClasspathEntry[] newResolvedPath = project.getResolvedClasspath(true, true);
	
	if (this.oldResolvedPath != null) {
		generateClasspathChangeDeltas(this.oldResolvedPath, newResolvedPath, manager, project);
	} else {
		project.saveClasspath(this.saveClasspath);		
	}

	done();
}

