public IJavaElement[] getChildren() {
	IJavaElement[] children = super.getChildren();
	int length = children.length;
	if (length == 0) return children;
	JavaModelManager manager = JavaModelManager.getJavaModelManager();
	Map sharedWorkingCopies = manager.sharedWorkingCopies;
	Map perOwnerWorkingCopies = (Map) sharedWorkingCopies.get(DefaultWorkingCopyOwner.PRIMARY);
	if (perOwnerWorkingCopies == null) return children;
	for (int i = 0; i < length; i++) {
		IJavaElement child = children[i];
		if (child instanceof CompilationUnit) {
			CompilationUnit cu = (CompilationUnit)child;
			CompilationUnit sharedWC = (CompilationUnit)perOwnerWorkingCopies.get(cu);
			if (sharedWC != null ){
				children[i] = sharedWC;
			}
		}
	}
	return children;
}

