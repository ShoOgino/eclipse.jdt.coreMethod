	/**
	 * Returns the XML String encoding of the class path.
	 */
	protected static Element getEntryAsXMLElement(Document document, IClasspathEntry entry, IPath prefixPath) throws JavaModelException {
		
		Element element= document.createElement("classpathentry"/*nonNLS*/);
		element.setAttribute("kind"/*nonNLS*/, kindToString(entry.getEntryKind()));
		IPath path= entry.getPath();
		if (entry.getEntryKind() != IClasspathEntry.CPE_VARIABLE){
			// translate to project relative from absolute (unless a device path)
			if (path.isAbsolute()) {
				if (prefixPath != null && prefixPath.isPrefixOf(path)) {
					if (path.segment(0).equals(prefixPath.segment(0))) {
						path= path.removeFirstSegments(1);
						path= path.makeRelative();
					} else {
						path= path.makeAbsolute();
					}
				}
			}
		}
		element.setAttribute("path"/*nonNLS*/, path.toString());
		if (entry.getSourceAttachmentPath() != null){
			element.setAttribute("sourcepath"/*nonNLS*/, entry.getSourceAttachmentPath().toString());
		}
		if (entry.getSourceAttachmentRootPath() != null){
			element.setAttribute("rootpath"/*nonNLS*/, entry.getSourceAttachmentRootPath().toString());
		}
		return element;
	}

