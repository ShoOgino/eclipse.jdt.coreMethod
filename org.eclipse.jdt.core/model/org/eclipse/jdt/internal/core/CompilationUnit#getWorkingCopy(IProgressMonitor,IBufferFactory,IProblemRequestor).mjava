/**
 * @see IWorkingCopy#getWorkingCopy(IProgressMonitor, IBufferFactory, IProblemRequestor)
 */
public IJavaElement getWorkingCopy(IProgressMonitor pm, IBufferFactory factory, IProblemRequestor problemRequestor) throws JavaModelException {
	if (isWorkingCopy()) return this;
	
	CompilationUnit workingCopy = 
		new CompilationUnit(
			(IPackageFragment)getParent(), 
			getElementName(), 
			new DefaultCompilationUnitOwner(factory, problemRequestor));
	BecomeWorkingCopyOperation op = new BecomeWorkingCopyOperation(workingCopy, null);
	runOperation(op, pm);
	return workingCopy;
}

