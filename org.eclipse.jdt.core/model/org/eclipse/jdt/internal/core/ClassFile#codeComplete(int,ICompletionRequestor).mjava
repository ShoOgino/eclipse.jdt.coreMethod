/**
 * @see ICodeAssist#codeComplete(int, ICompletionRequestor)
 */
public void codeComplete(int offset, ICompletionRequestor requestor) throws JavaModelException {
	String source = getSource();
	if (source != null) {
		String encoding = JavaCore.getOption(JavaCore.CORE_ENCODING);
		String elementName = getElementName();
		BasicCompilationUnit cu = 
			new BasicCompilationUnit(
				getSource().toCharArray(), 
				null,
				elementName.substring(0, elementName.length()-".class".length()) + ".java", //$NON-NLS-1$ //$NON-NLS-2$
				encoding); 
		codeComplete(cu, cu, offset, requestor);
	}
}

