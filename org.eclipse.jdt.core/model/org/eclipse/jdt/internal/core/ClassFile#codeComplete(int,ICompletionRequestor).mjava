/**
 * @see ICodeAssist
 */
public void codeComplete(int offset, ICompletionRequestor requestor) throws JavaModelException {
	String source = getSource();
	if (source != null) {
		String encoding = (String) JavaCore.getOptions().get(CompilerOptions.OPTION_Encoding);
		if ("".equals(encoding)) encoding = null; //$NON-NLS-1$
		
		BasicCompilationUnit cu = 
			new BasicCompilationUnit(
				getSource().toCharArray(), 
				getElementName() + ".java", //$NON-NLS-1$
				encoding); 
		codeComplete(cu, cu, offset, requestor);
	}
}

