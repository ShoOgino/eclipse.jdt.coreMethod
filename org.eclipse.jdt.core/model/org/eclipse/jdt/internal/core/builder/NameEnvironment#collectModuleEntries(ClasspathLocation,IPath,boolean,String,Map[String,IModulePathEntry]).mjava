/** Returns the patched module if that is served by the current (binary) location. */
IModule collectModuleEntries(ClasspathLocation bLocation, IPath path, boolean isOnModulePath, String patchedModuleName,
								Map<String, IModulePathEntry> moduleEntries) {
	if (bLocation instanceof IMultiModuleEntry) {
		IMultiModuleEntry binaryModulePathEntry = (IMultiModuleEntry) bLocation;
		for (String moduleName : binaryModulePathEntry.getModuleNames()) {
			moduleEntries.put(moduleName, binaryModulePathEntry);
		}
		if (patchedModuleName != null) {
			IModule module = binaryModulePathEntry.getModule(patchedModuleName.toCharArray());
			if (module != null)
				return module;
		}
	} else if (isOnModulePath) {
		IModulePathEntry binaryModulePathEntry = new ModulePathEntry(path, bLocation);
		IModule module = binaryModulePathEntry.getModule();
		if (module != null) {
			String moduleName = String.valueOf(module.name());
			moduleEntries.put(moduleName, binaryModulePathEntry);
			if (patchedModuleName != null && moduleName.equals(patchedModuleName))
				return module;
		}
	}
	return null;
}

