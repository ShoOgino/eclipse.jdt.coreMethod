	/**
	 * Compare the visibility and gender of the two types.
	 * Returns true if equal, false if not.
	 */
	protected boolean compareVisibilityAndGender(
		TypeStructureEntry tsEntry,
		org.eclipse.jdt.core.IType type)
		throws JavaModelException {
		try {
			/* This relies on visibility bits being the same between the image builder and the java model. */
			IType oldType = (IType) tsEntry.getType().inState(fNewState);
			final int visVlags =
				IConstants.AccPublic | IConstants.AccPrivate | IConstants.AccProtected;
			int oldVis = oldType.getModifiers() & visVlags;
			int newVis = type.getFlags() & visVlags;
			return oldVis == newVis && oldType.isInterface() == type.isInterface();
		} catch (NotPresentException e) {
			// Old state may be missing.  See 1FVQGL1: ITPJCORE:WINNT - SEVERE - Error saving java file
			return false;
		}
	}

