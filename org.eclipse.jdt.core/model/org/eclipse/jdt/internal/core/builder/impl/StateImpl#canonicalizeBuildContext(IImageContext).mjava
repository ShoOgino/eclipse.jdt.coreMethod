	/**
	 * Returns a new build context that contains package handles
	 * that have been canonicalized in this state.
	 */
	protected IImageContext canonicalizeBuildContext(IImageContext oldContext) {
		if (oldContext == null) {
			return null;
		}
		IPackage[] oldPackages = oldContext.getPackages();
		int pkgCount = oldPackages.length;
		IPackage[] newPackages = new IPackage[pkgCount];

		/* canonicalize packages through package map */
		for (int i = 0; i < pkgCount; i++) {
			newPackages[i] = canonicalize(oldPackages[i]);
		}

		return new ImageContextImpl(fDevelopmentContext, newPackages);
	}

