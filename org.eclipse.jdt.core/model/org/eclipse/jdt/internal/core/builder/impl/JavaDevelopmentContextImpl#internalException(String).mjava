	/**
	 * Process an internal exception: if we're being called by the compiler, throw an AbortCompilation
	 * otherwise throw an internal image builder exception.
	 */
	protected RuntimeException internalException(String message) {
		ImageBuilderInternalException imageBuilderException =
			new ImageBuilderInternalException(message);
		if (this.inCompiler) {
			return new AbortCompilation(true, imageBuilderException);
		} else {
			return imageBuilderException;
		}
	}

