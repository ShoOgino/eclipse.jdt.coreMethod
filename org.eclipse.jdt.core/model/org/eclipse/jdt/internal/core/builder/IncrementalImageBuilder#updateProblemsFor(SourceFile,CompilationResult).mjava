protected void updateProblemsFor(SourceFile sourceFile, CompilationResult result) throws CoreException {
	IMarker[] markers = JavaBuilder.getProblemsFor(sourceFile.resource);
	IProblem[] problems = result.getProblems(); // contains both true problems and todo tasks
	if (problems == null && markers.length == 0 && JavaBuilder.getTasksFor(sourceFile.resource).length == 0) return;

	notifier.updateProblemCounts(markers, problems);
	JavaBuilder.removeProblemsAndTasksFor(sourceFile.resource);
	storeProblemsFor(sourceFile, problems);
}

