public SourceFile(String fileName, String initialTypeName) {
	this.fileName = fileName.toCharArray();
	CharOperation.replace(this.fileName, '\\', '/');

	char[] typeName = initialTypeName.toCharArray();
	int lastIndex = CharOperation.lastIndexOf('/', typeName);
	this.mainTypeName = CharOperation.subarray(typeName, lastIndex + 1, -1);
	this.packageName = CharOperation.splitOn('/', typeName, 0, lastIndex - 1);

	this.encoding = (String) JavaCore.getOptions().get(JavaCore.CORE_ENCODING);
	if (this.encoding.length() == 0)
		this.encoding = null;
}

