/**
 * Computes the added, removed, changed packages and zips 
 * for this incremental build.
 * Looks only in the union of the old and the new classpaths.
 * Folders outside this union are ignored.
 */
protected void computeAllPackages() {
	fAddedPkgOrZips = new Vector();
	fRemovedPkgOrZips = new Vector();
	fChangedPkgOrZips = new Vector();
	IPackageFragmentRoot[] oldRoots = fOldState.getPackageFragmentRootsInClassPath();
	fNewState.readClassPath(); // TBD: Only read it if changed.
	IPackageFragmentRoot[] newRoots = fNewState.getPackageFragmentRootsInClassPath();
	for (Enumeration e = fSourceDeltas.elements(); e.hasMoreElements();) {
		IResourceDelta delta = (IResourceDelta) e.nextElement();
		computeAllPackages(delta, oldRoots, newRoots);
	}
}

