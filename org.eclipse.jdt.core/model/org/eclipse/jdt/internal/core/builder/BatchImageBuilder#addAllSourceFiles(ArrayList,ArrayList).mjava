protected void addAllSourceFiles(final ArrayList locations, final ArrayList typeNames) throws CoreException {
	for (int i = 0, length = sourceFolders.length; i < length; i++) {
		final int srcFolderLength = sourceFolders[i].getLocation().addTrailingSeparator().toString().length();
		sourceFolders[i].accept(
			new IResourceVisitor() {
				public boolean visit(IResource resource) {
					if (resource.getType() == IResource.FILE) {
						if (JavaBuilder.JAVA_EXTENSION.equalsIgnoreCase(resource.getFileExtension())) {
							String sourceLocation = resource.getLocation().toString();
							locations.add(sourceLocation);
							typeNames.add(sourceLocation.substring(srcFolderLength, sourceLocation.length() - 5)); // length of .java
						}
						return false;
					}
					return true;
				}
			}
		);
		notifier.checkCancel();
	}
}

