/**
 * Returns true if the class path has changed since the last built state.
 */
protected boolean classpathChanged(IState lastBuiltState) throws CoreException {
	try {
		IPackageFragmentRoot[] oldRoots = ((StateImpl) lastBuiltState).getPackageFragmentRootsInClassPath();
		IPackageFragmentRoot[] newRoots = ((JavaProject) getJavaProject()).getBuilderRoots(null);
		return !Util.equalArraysOrNull(oldRoots, newRoots);
	} catch (JavaModelException e) {
		throw new CoreException(
				new Status(IStatus.ERROR, JavaCore.PLUGIN_ID, Platform.PLUGIN_ERROR, Util.bind("element.projectDoesNotExist", getProject().getFullPath().toString()), e)); //$NON-NLS-1$
	}
}

