	/** 
	 * Returns a copy of the state with the given workspace and build context.
	 */
	protected StateImpl copy(IProject newProject, IImageContext context) {
		StateImpl newState= new StateImpl(this.fDevelopmentContext, newProject);
		newState.fPackageMap= this.fPackageMap.copy();
		newState.fPathMap= this.fPathMap;
		newState.fSourceElementTable= this.fSourceElementTable.copy();
		newState.fPrincipalStructureTable= (Hashtable) this.fPrincipalStructureTable.clone();
		newState.fProblemReporter= this.fProblemReporter.copy();
		newState.fGraph= this.fGraph.copy();
		newState.fBuildContext= context;
		return newState;
	}

