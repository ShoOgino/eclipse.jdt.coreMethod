/**
 * Returns a set of strings containing the names of all packages
 * in the image, and all their prefixes.
 */
protected Hashtable computePackagePrefixes(PackageMap packageMap) {
	Hashtable prefixes = new Hashtable(packageMap.size() * 3 + 1);
	for (Enumeration e = packageMap.getAllPackages(); e.hasMoreElements();) {
		IPackage pkg = (IPackage) e.nextElement();
		if (!pkg.isUnnamed()) {
			String name = pkg.getName();
			while (!prefixes.containsKey(name)) {
				prefixes.put(name, name);
				int i = name.lastIndexOf('.');
				if (i == -1)
					break;
				name = name.substring(0, i);
			}
		}
	}
	return prefixes;
}

