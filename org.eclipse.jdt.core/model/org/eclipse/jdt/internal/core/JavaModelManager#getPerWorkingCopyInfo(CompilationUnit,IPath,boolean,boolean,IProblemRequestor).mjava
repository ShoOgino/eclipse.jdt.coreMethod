	/*
	 * Returns the per-working copy info for the given working copy at the given path.
	 * If it doesn't exist and if create, add a new per-working copy info with the given problem requestor.
	 * If recordUsage, increment the per-working copy info's use count.
	 * Returns null if it doesn't exist and not create.
	 */
	public PerWorkingCopyInfo getPerWorkingCopyInfo(CompilationUnit workingCopy, IPath path, boolean create, boolean recordUsage, IProblemRequestor problemRequestor) {
		synchronized(perWorkingCopyInfos) { // use the perWorkingCopyInfo collection as its own lock
			WorkingCopyOwner owner = workingCopy.owner;
			Map pathToPerWorkingCopyInfos = (Map)this.perWorkingCopyInfos.get(owner);
			if (pathToPerWorkingCopyInfos == null && create) {
				pathToPerWorkingCopyInfos = new HashMap();
				this.perWorkingCopyInfos.put(owner, pathToPerWorkingCopyInfos);
			}

			PerWorkingCopyInfo info = pathToPerWorkingCopyInfos == null ? null : (PerWorkingCopyInfo) pathToPerWorkingCopyInfos.get(path);
			if (info == null && create) {
				info= new PerWorkingCopyInfo(workingCopy, problemRequestor);
				pathToPerWorkingCopyInfos.put(path, info);
			}
			if (info != null && recordUsage) info.useCount++;
			return info;
		}
	}	

