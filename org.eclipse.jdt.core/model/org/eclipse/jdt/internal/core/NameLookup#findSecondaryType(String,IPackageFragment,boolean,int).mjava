	// TODO : (kent) enable once index support is in
	IType findSecondaryType(String typeName, IPackageFragment pkg, boolean partialMatch, final int acceptFlags) {
		try {
			final ArrayList paths = new ArrayList();
			ITypeNameRequestor nameRequestor = new ITypeNameRequestor() {
				public void acceptClass(char[] packageName, char[] simpleTypeName, char[][] enclosingTypeNames, String path) {
					if ((acceptFlags & ACCEPT_CLASSES) != 0)
						if (enclosingTypeNames == null || enclosingTypeNames.length == 0) // accept only top level types
							paths.add(path);
				}
				public void acceptInterface(char[] packageName, char[] simpleTypeName, char[][] enclosingTypeNames, String path) {
					if ((acceptFlags & ACCEPT_INTERFACES) != 0)
						if (enclosingTypeNames == null || enclosingTypeNames.length == 0) // accept only top level types
							paths.add(path);
				}
			};

			new SearchEngine().searchAllTypeNames(
				workspace,
				pkg.getElementName().toCharArray(),
				typeName.toCharArray(),
				partialMatch ? IJavaSearchConstants.PREFIX_MATCH : IJavaSearchConstants.EXACT_MATCH,
				partialMatch ? IJavaSearchConstants.CASE_INSENSITIVE : IJavaSearchConstants.CASE_SENSITIVE,
				IJavaSearchConstants.TYPE,
				SearchEngine.createJavaSearchScope(new IJavaElement[] {pkg}, false),
				nameRequestor,
				IJavaSearchConstants.CANCEL_IF_NOT_READY_TO_SEARCH,
				null);

			if (!paths.isEmpty()) {
				for (int i = 0, l = paths.size(); i < l; i++) {
					String pathname = (String) paths.get(i);
					if (Util.isJavaFileName(pathname)) {
						IFile file = workspace.getRoot().getFile(new Path(pathname));
						ICompilationUnit unit = JavaCore.createCompilationUnitFrom(file);
						return unit.getType(typeName);
					}
				}
			}
		} catch (JavaModelException ignore) {
		} catch (OperationCanceledException ignore) {}
		return null;
	}

