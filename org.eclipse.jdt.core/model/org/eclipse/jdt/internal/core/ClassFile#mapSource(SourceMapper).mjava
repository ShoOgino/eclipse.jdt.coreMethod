private IBuffer mapSource(SourceMapper mapper) {
	char[] contents = mapper.findSource(getType());
	if (contents != null) {
		// create buffer
		IBuffer buffer = getBufferFactory().createBuffer(this);
		if (buffer == null) return null;
		BufferManager bufManager = getBufferManager();
		bufManager.addBuffer(buffer);
		
		// set the buffer source
		if (buffer.getCharacters() == null){
			buffer.setContents(contents);
		}
		
		// listen to buffer changes
		buffer.addBufferChangedListener(this);	
				
		// do the source mapping
		mapper.mapSource(getType(), contents);
		
		return buffer;
	}
	return null;
}

