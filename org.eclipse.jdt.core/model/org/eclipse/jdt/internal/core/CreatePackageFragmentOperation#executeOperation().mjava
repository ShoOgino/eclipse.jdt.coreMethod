/**
 * Execute the operation - creates the new package fragment and any
 * side effect package fragments.
 *
 * @exception JavaModelException if the operation is unable to complete
 */
protected void executeOperation() throws JavaModelException {
	JavaElementDelta delta = newJavaElementDelta();
	IPackageFragmentRoot root = (IPackageFragmentRoot) getParentElement();
	String[] names = Signature.getSimpleNames(fName);
	beginTask(Util.bind("operation.createPackageFragmentProgress"/*nonNLS*/), names.length);
	IContainer parentFolder = (IContainer) root.getUnderlyingResource();
	String sideEffectPackageName = ""/*nonNLS*/;
	Vector resultElements = new Vector(names.length);
	int i;
	for (i = 0; i < names.length; i++) {
		String subFolderName = names[i];
		sideEffectPackageName += subFolderName;
		IResource subFolder = parentFolder.findMember(subFolderName);
		if (subFolder == null) {
			createFolder(parentFolder, subFolderName, fForce);
			parentFolder = parentFolder.getFolder(new Path(subFolderName));
			IPackageFragment addedFrag = root.getPackageFragment(sideEffectPackageName);
			delta.added(addedFrag);
			resultElements.addElement(addedFrag);
		} else {
			parentFolder = (IContainer) subFolder;
		}
		sideEffectPackageName += '.';
		worked(1);
	}
	if (resultElements.size() > 0) {
		fResultElements = new IJavaElement[resultElements.size()];
		resultElements.copyInto(fResultElements);
		addDelta(delta);
	}
	done();
}

