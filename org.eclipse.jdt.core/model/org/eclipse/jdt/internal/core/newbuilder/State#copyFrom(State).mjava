void copyFrom(State lastState) {
	try {
		this.references = (HashtableOfObject) lastState.references.clone();
		this.buildNumber = lastState.buildNumber + 1;
		this.lastStructuralBuildNumber = lastState.lastStructuralBuildNumber;
	} catch (CloneNotSupportedException e) {
		this.references = new HashtableOfObject(31);

		char[][] keyTable = lastState.references.keyTable;
		Object[] valueTable = lastState.references.valueTable;
		for (int i = 0, l = keyTable.length; i < l; i++)
			if (keyTable[i] != null)
				this.references.put(keyTable[i], valueTable[i]);
	}
}

