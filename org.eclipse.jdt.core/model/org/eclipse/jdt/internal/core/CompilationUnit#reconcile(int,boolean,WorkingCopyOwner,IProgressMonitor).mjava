/**
 * @see ICompilationUnit#reconcile(int, boolean, WorkingCopyOwner, IProgressMonitor)
 * @since 3.0
 */
public org.eclipse.jdt.core.dom.CompilationUnit reconcile(
	int astLevel,
	boolean forceProblemDetection,
	WorkingCopyOwner workingCopyOwner,
	IProgressMonitor monitor)
	throws JavaModelException {
	
	if (!isWorkingCopy()) return null; // Reconciling is not supported on non working copies
	if (workingCopyOwner == null) workingCopyOwner = DefaultWorkingCopyOwner.PRIMARY;
	
	boolean createAST = false;
	if (astLevel == AST.JLS2) {
		// client asking for level 2 AST; these are supported
		createAST = true;
	} else if (astLevel == AST.JLS3) {
		// client asking for level 3 ASTs; these are supported
		createAST = true;
	} else {
		// client asking for no AST (0) or unknown ast level
		// either way, request denied
		createAST = false;
	}
	ReconcileWorkingCopyOperation op = new ReconcileWorkingCopyOperation(this, createAST, astLevel, forceProblemDetection, workingCopyOwner);
	op.runOperation(monitor);
	return op.ast;
}

