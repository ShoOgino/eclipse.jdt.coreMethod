	public void updateProjectReferences(JavaProject project, IClasspathEntry[] oldResolvedPath, IClasspathEntry[] newResolvedPath, IClasspathEntry[] newRawPath, boolean canChangeResources) throws JavaModelException {
		ProjectUpdateInfo info;
		synchronized (this) {
			info = (ProjectUpdateInfo) (canChangeResources ? this.projectUpdates.remove(project) /*remove possibly awaiting one*/ : this.projectUpdates.get(project));
			if (info == null) {
				info = new ProjectUpdateInfo();
				info.project = project;
				info.oldResolvedPath = oldResolvedPath;
				if (!canChangeResources) {
					this.projectUpdates.put(project, info);
				}
		    } // else refresh new classpath information
		    info.newResolvedPath = newResolvedPath;
		    info.newRawPath = newRawPath;
		}

	    if (canChangeResources) {
	        info.updateProjectReferencesIfNecessary();
	    } // else project references will be updated on next PRE_BUILD notification
	}

