		/**
		 * Renames the main type in <code>cu</code>.
		 */
		private void updateTypeName(ICompilationUnit cu, IDOMCompilationUnit domCU, String oldName, String newName) throws JavaModelException {
			if (newName != null) {
				if (fRenamedCompilationUnits == null) {
					fRenamedCompilationUnits= new ArrayList(1);
				}
				fRenamedCompilationUnits.add(cu);
				String oldTypeName= oldName.substring(0, oldName.length() - 5);
				String newTypeName= newName.substring(0, newName.length() - 5);
				// update main type name
				IType[] types = cu.getTypes();
				for (int i = 0, max = types.length; i < max; i++) {
					IType currentType = types[i];
					if (currentType.getElementName().equals(oldTypeName)) {
						IDOMNode typeNode = ((JavaElement) currentType).findNode(domCU);
						if (typeNode != null) {
							typeNode.setName(newTypeName);
						}
					}
				}
			}
		}

