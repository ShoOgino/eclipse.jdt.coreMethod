/*
 * Returns the shared working copy with the given name for the given owner.
 * Returns the primary compilation unit if not shared.
 */
protected ICompilationUnit getCompilationUnit(String cuName, CompilationUnitOwner owner) {
	ICompilationUnit primaryCU =  new CompilationUnit(this, cuName, DefaultCompilationUnitOwner.PRIMARY);
	if (owner.equals(DefaultCompilationUnitOwner.PRIMARY)) return primaryCU;
	JavaModelManager manager = JavaModelManager.getJavaModelManager();
	Map sharedWorkingCopies = manager.sharedWorkingCopies;
	Map perOwnerWorkingCopies = (Map) sharedWorkingCopies.get(owner);
	ICompilationUnit sharedWC = (ICompilationUnit)perOwnerWorkingCopies.get(primaryCU);
	if (sharedWC == null) {
		return primaryCU;
	} else {
		return sharedWC;
	}
}

