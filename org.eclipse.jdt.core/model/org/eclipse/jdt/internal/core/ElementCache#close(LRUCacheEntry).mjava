/**
 * Returns true if the element is successfully closed and
 * removed from the cache, otherwise false.
 *
 * <p>NOTE: this triggers an external removal of this element
 * by closing the element.
 */
protected boolean close(LRUCacheEntry entry) {
	IOpenable element = (IOpenable) entry._fKey;
	synchronized (element) {
		try {
			if (element.hasUnsavedChanges()) {
				return false;
			} else {
				// We must close an entire JarPackageFragmentRoot at once.
				if (element instanceof JarPackageFragment) {
					JarPackageFragment packageFragment= (JarPackageFragment) element;
					JarPackageFragmentRoot root = (JarPackageFragmentRoot) packageFragment.getParent();
					root.close();
				} else {
					element.close();
				}
				return true;
			}
		} catch (JavaModelException npe) {
			return false;
		}
	}
}

