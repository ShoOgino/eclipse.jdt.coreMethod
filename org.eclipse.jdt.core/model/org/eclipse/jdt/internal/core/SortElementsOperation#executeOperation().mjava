	/**
	 * @see org.eclipse.jdt.internal.core.JavaModelOperation#executeOperation()
	 */
	protected void executeOperation() throws JavaModelException {
		try {
			beginTask(Util.bind("operation.sortelements"), getMainAmountOfWork()); //$NON-NLS-1$
			for (int i = 0, max = fElementsToProcess.length; i < max; i++) {
				WorkingCopy copy = (WorkingCopy) fElementsToProcess[i];
				ICompilationUnit unit = (ICompilationUnit) copy.getOriginalElement();
				IBuffer buffer = copy.getBuffer();
				if (buffer  == null) { 
					return;
				}
				char[] bufferContents = buffer.getCharacters();
				String result = processElement(unit, positions == null ? null : positions[i], bufferContents);
				if (!CharOperation.equals(result.toCharArray(), bufferContents)) {
					copy.getBuffer().setContents(result);
				}
				worked(1);
			}
		} finally {
			done();
		}
	}

