/**
 * @see IWorkingCopy
 */
public void commit(boolean force, IProgressMonitor monitor) throws JavaModelException {
	ICompilationUnit original = (ICompilationUnit)this.getOriginalElement();
	if (original.exists()) {
		CommitWorkingCopyOperation op= new CommitWorkingCopyOperation(this, force);
		runOperation(op, monitor);
	} else {
		IFile originalRes = (IFile)original.getResource();
		try {
			originalRes.create(
				new InputStream() {
					public int read() throws IOException {
						return -1;
					}
				},
				force,
				monitor);
		} catch (CoreException e) {
			throw new JavaModelException(e);
		}
		original.getBuffer().setContents(this.getContents());
		original.save(monitor, force);
	}
}

