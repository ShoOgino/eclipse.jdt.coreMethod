	public IClasspathContainer getClasspathContainer(final IPath containerPath, final IJavaProject project) throws JavaModelException {

		IClasspathContainer container = containerGet(project, containerPath);

		if (container == null) {
			if (this.batchContainerInitializations) {
				// avoid deep recursion while initializaing container on workspace restart
				// (see https://bugs.eclipse.org/bugs/show_bug.cgi?id=60437)
				this.batchContainerInitializations = false;
				container = initializeAllContainers(project, containerPath);
			} else {
				container = initializeContainer(project, containerPath);
			}
			if (container == null) { // initializer failed to do its job: redirect to the failure container
				ClasspathContainerInitializer initializer = JavaCore.getClasspathContainerInitializer(containerPath.segment(0));
				if (initializer == null) {
					// create a dummy initializer and get the default failure container
					container = (new ClasspathContainerInitializer() {
						public void initialize(IPath path, IJavaProject javaProject) throws CoreException {
							// not used
						}
					}).getFailureContainer(containerPath, project);
				} else {
					container = initializer.getFailureContainer(containerPath, project);
				}
				if (container != null)
					containerPut(project, containerPath, container);
			}
		}
		return container;			
	}

