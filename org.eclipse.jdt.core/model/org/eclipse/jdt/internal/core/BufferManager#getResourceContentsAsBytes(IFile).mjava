	/**
	 * Returns the given file's contents as a byte array.
	 */
	public static byte[] getResourceContentsAsBytes(IFile file)
		throws JavaModelException {
		InputStream stream = null;
		try {
			stream = file.getContents(true);
		} catch (CoreException e) {
			throw new JavaModelException(e);
		}
		byte[] contents = new byte[0];
		byte[] grow;
		try {
			int available = stream.available();
			int pos = 0;
			while (available > 0) {
				grow = new byte[contents.length + available];
				System.arraycopy(contents, 0, grow, 0, contents.length);
				contents = grow;
				stream.read(contents, pos, available);
				available = stream.available();
			}
		} catch (IOException e) {
			throw new JavaModelException(e, IJavaModelStatusConstants.IO_EXCEPTION);
		} finally {
			try {
				stream.close();
			} catch (IOException ioe) {
				throw new JavaModelException(ioe, IJavaModelStatusConstants.IO_EXCEPTION);
			}
		}
		return contents;
	}

