		/**
    	 * Returns the project custom preference pool.
    	 * Project preferences may include custom encoding.
    	 * @return IEclipsePreferences
    	 */
    	public IEclipsePreferences getEclipsePreferences(){
    		if (!JavaProject.hasJavaNature(this.project)) return null;
    		// Get cached preferences if exist
    		JavaModelManager.PerProjectInfo perProjectInfo = JavaModelManager.getJavaModelManager().getPerProjectInfo(this.project, true);
    		if (perProjectInfo.preferences != null) return perProjectInfo.preferences;
    		// Init project preferences
    		IScopeContext context = new ProjectScope(getProject());
    		final IEclipsePreferences eclipsePreferences = context.getNode(JavaCore.PLUGIN_ID);
    		updatePreferences(eclipsePreferences);
    		perProjectInfo.preferences = eclipsePreferences;
    
    		// Listen to node removal from parent in order to reset cache (see bug 68993)
    		IEclipsePreferences.INodeChangeListener nodeListener = new IEclipsePreferences.INodeChangeListener() {
    			public void added(IEclipsePreferences.NodeChangeEvent event) {
    				// do nothing
    			}
    			public void removed(IEclipsePreferences.NodeChangeEvent event) {
    				if (event.getChild() == eclipsePreferences) {
    					JavaModelManager.getJavaModelManager().resetProjectPreferences(JavaProject.this);
    				}
    			}
    		};
    		((IEclipsePreferences) eclipsePreferences.parent()).addNodeChangeListener(nodeListener);
    
    		// Listen to preference changes
    		IEclipsePreferences.IPreferenceChangeListener preferenceListener = new IEclipsePreferences.IPreferenceChangeListener() {
    			public void preferenceChange(IEclipsePreferences.PreferenceChangeEvent event) {
    				String propertyName = event.getKey();
    				if (propertyName.startsWith(JavaCore.PLUGIN_ID)) {
	    				JavaModelManager manager = JavaModelManager.getJavaModelManager();
	    				int length = JavaCore.PLUGIN_ID.length() + 1;
	    				StringTokenizer tokenizer = new StringTokenizer(propertyName.substring(length));
	    				String token = tokenizer.nextToken();
	    				if (propertyName.equals(JavaCore.CORE_JAVA_BUILD_CLEAN_OUTPUT_FOLDER) ||
	    					token.equals("builder") || //$NON-NLS-1$
	    					propertyName.equals(JavaCore.CORE_INCOMPLETE_CLASSPATH) ||
	    					propertyName.equals(JavaCore.CORE_CIRCULAR_CLASSPATH) ||
	    					propertyName.equals(JavaCore.CORE_INCOMPATIBLE_JDK_LEVEL) ||
	    					token.equals("classpath")) //$NON-NLS-1$
	    				{
	    					manager.deltaState.addClasspathValidation(JavaProject.this);
	    				}
	    				manager.resetProjectOptions(JavaProject.this);
    				}
    			}
    		};
    		eclipsePreferences.addPreferenceChangeListener(preferenceListener);
    		return eclipsePreferences;
    	}

