/**
 * Creates a compilation unit.
 *
 * @exception JavaModelException if unable to create the compilation unit.
 */
protected void executeOperation() throws JavaModelException {
	beginTask(Util.bind("operation.createUnitProgress"/*nonNLS*/), 2);
	JavaElementDelta delta = newJavaElementDelta();
	ICompilationUnit unit = getCompilationUnit();
	IPackageFragment pkg = (IPackageFragment) getParentElement();
	IContainer folder = (IContainer) pkg.getUnderlyingResource();
	InputStream stream = new ByteArrayInputStream(BufferManager.stringToBytes(fSource));
	worked(1);
	createFile(folder, unit.getElementName(), stream, fForce);
	worked(1);
	fResultElements = new IJavaElement[] {getCompilationUnit()};
	for (int i = 0; i < fResultElements.length; i++) {
		delta.added(fResultElements[i]);
	}
	addDelta(delta);
	done();
}

