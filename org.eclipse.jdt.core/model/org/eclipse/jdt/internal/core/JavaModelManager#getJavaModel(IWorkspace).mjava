	/**
	 * Returns the JavaModel for the given workspace, creating
	 * it if it does not yet exist.
	 */
	public static JavaModel getJavaModel(IWorkspace workspace) {
		JavaModelCache modelCache = getJavaModelManager().cache;
		IJavaModel javaModel = modelCache.getJavaModel();
		if (javaModel != null) {
			// if the current java model corresponds to a different workspace,
			// try to close it
			JavaModelInfo modelInfo = (JavaModelInfo) modelCache.getInfo(javaModel);
			if (!modelInfo.workspace.equals(workspace)) {
				try {
					javaModel.close();
					javaModel = null;
				} catch (JavaModelException e) {
					Assert.isTrue(false, Util.bind("element.onlyOneJavaModel")); //$NON-NLS-1$
					return null;
				}
			}
		}
		if (javaModel == null) {
			return new JavaModel(workspace);
		} else {
			return (JavaModel)javaModel;
		}

	}

