/**
 * Accepts the line separator table and converts it into a line start table.
 *
 * <p>A line separator might corresponds to several characters in the source.
 *
 * @see IDocumentElementRequestor#acceptLineSeparatorPositions(int[])
 */
public void acceptLineSeparatorPositions(int[] positions) {
	if (positions != null) {
		int length = positions.length;
		if (length > 0) {
			fLineStartPositions = new int[length + 1];
			fLineStartPositions[0] = 0;
			int documentLength = fDocument.length;
			for (int i = 0; i < length; i++) {
				int iPlusOne = i + 1;
				int positionPlusOne = positions[i] + 1;	
				if (positionPlusOne < documentLength) {
					if (iPlusOne < length) {
						// more separators
						fLineStartPositions[iPlusOne] = positionPlusOne;
					} else {
						// no more separators
						if (fDocument[positionPlusOne] == '\n') {
							fLineStartPositions[iPlusOne] = positionPlusOne + 1;
						} else {
							fLineStartPositions[iPlusOne] = positionPlusOne;
						}
					}
				} else {
					fLineStartPositions[iPlusOne] = positionPlusOne;
				}
			}
		}
	}
}

