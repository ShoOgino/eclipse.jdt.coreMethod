	/* package */  String serialize() throws IOException {
		ByteArrayOutputStream s = new ByteArrayOutputStream();
		OutputStreamWriter writer = new OutputStreamWriter(s, "UTF8"); //$NON-NLS-1$
		XMLWriter xmlWriter = new XMLWriter(writer);
		
		HashMap library = new HashMap();
		library.put(TAG_VERSION, String.valueOf(CURRENT_VERSION));
		library.put(TAG_SYSTEMLIBRARY, String.valueOf(this.isSystemLibrary));
		xmlWriter.printTag(TAG_USERLIBRARY, library, true, true, false);
		
		for (int i = 0; i < this.entries.length; ++i) {
			IClasspathEntry curr= this.entries[i];
			
			HashMap archive = new HashMap();
			archive.put(TAG_PATH, curr.getPath().toString());
			IPath sourceAttach= curr.getSourceAttachmentPath();
			if (sourceAttach != null)
				archive.put(TAG_SOURCEATTACHMENT, sourceAttach);
			IPath sourceAttachRoot= curr.getSourceAttachmentRootPath();
			if (sourceAttachRoot != null)
				archive.put(TAG_SOURCEATTACHMENTROOT, sourceAttachRoot);				
			xmlWriter.printTag(TAG_ARCHIVE, archive, true, true, true);
		}	
		xmlWriter.endTag(TAG_USERLIBRARY, true);
		writer.flush();
		writer.close();
		return s.toString("UTF8");//$NON-NLS-1$
	}

