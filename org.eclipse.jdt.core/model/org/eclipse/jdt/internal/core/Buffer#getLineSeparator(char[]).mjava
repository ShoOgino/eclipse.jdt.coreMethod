/**
 * Returns the line separator used by this buffer.
 * Uses the given text if none found.
 *
 * @return </code>"\n"</code> or </code>"\r"</code> or  </code>"\r\n"</code>
 */
private String getLineSeparator(char[] text) {
	if (this.lineSeparator == null) {
		// search in this buffer's contents first
		this.lineSeparator = this.findLineSeparator(this.getCharacters());
		if (this.lineSeparator == null) {
			// search in the given text
			this.lineSeparator = this.findLineSeparator(text);
			if (this.lineSeparator == null) {
				// default to system line separator
				return Util.LINE_SEPARATOR;
			}
		}
	}
	return this.lineSeparator;
}

