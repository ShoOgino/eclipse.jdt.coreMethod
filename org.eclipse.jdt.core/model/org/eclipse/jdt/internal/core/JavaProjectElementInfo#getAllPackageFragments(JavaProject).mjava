	HashMap getAllPackageFragments(JavaProject project) {
		if (this.allPkgFragmentsCache == null) {
			HashMap cache = new HashMap();
			IPackageFragmentRoot[] roots = getAllPackageFragmentRoots(project);
			IPackageFragment[] frags = this.getPackageFragmentsInRoots(roots, project);
			for (int i= 0; i < frags.length; i++) {
				IPackageFragment fragment= frags[i];
				IPackageFragment[] entry= (IPackageFragment[]) cache.get(fragment.getElementName());
				if (entry == null) {
					entry= new IPackageFragment[1];
					entry[0]= fragment;
					cache.put(fragment.getElementName(), entry);
				} else {
					IPackageFragment[] copy= new IPackageFragment[entry.length + 1];
					System.arraycopy(entry, 0, copy, 0, entry.length);
					copy[entry.length]= fragment;
					cache.put(fragment.getElementName(), copy);
				}
			}
			this.allPkgFragmentsCache = cache;
		}
		return this.allPkgFragmentsCache;
	}

