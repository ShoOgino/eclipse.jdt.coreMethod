	/*
	 * Returns the extended end position of the given node.
	 */
	public int getExtendedEnd(ASTNode node) {
		int end = node.getStartPosition() + node.getLength();
		if (this.trailingComments != null) {
			int[] range = (int[]) this.trailingComments.get(node);
			if (range != null) {
				if (range[0] == -1 && range[1] == -1) {
					ASTNode parent = node.getParent();
					if (parent != null && ((parent.getFlags() & ASTNode.ORIGINAL) != 0)) {
						return getExtendedEnd(parent);
					}
				} else {
					Comment lastComment = this.comments[range[1]];
					end = lastComment.getStartPosition() + lastComment.getLength();
				}
			}
		}
		return end-1;
	}

