	private static CompilationUnit handledSevereErrorsWhileParsing(AST ast) {
		CompilationUnit compilationUnit = ast.newCompilationUnit();
		CompilationResult compilationResult = CodeSnippetParsingUtil.RecordedCompilationResult;
		final int problemsCount = compilationResult.problemCount;
		if (problemsCount != 0) {
			// record problems
			IProblem[] resizedProblems = null;
			final IProblem[] problems = compilationResult.problems;
			if (problems.length == problemsCount) {
				resizedProblems = problems;
			} else {
				System.arraycopy(problems, 0, (resizedProblems = new IProblem[problemsCount]), 0, problemsCount);
			}
			compilationUnit.setProblems(resizedProblems);
		}
		CodeSnippetParsingUtil.reset();
		return compilationUnit;
	}

