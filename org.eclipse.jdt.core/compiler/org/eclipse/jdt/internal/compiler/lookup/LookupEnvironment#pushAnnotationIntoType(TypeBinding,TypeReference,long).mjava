/**
 * Create an annotated type from 'type' by applying 'annotationBits' to its outermost enclosing type.
 * This is used for those locations where a null annotations was parsed as a declaration annotation
 * and later must be pushed into the type.
 * @param type
 * @param annotationBits
 */
public TypeBinding pushAnnotationIntoType(TypeBinding type, TypeReference typeRef, long annotationBits) {
	TypeBinding outermostType = type;
	if (typeRef instanceof QualifiedTypeReference) {
		int depth = typeRef.getAnnotatableLevels();
		while (--depth > 0)
			outermostType = outermostType.enclosingType();
	}
	if ((outermostType.tagBits & TagBits.AnnotationNullMASK) != annotationBits) {
		if (type == outermostType)
			return createAnnotatedType(type, annotationBits);
		// types with true enclosingType() must be ReferenceBindings
		return reWrap((ReferenceBinding) type, outermostType, (ReferenceBinding)createAnnotatedType(outermostType, annotationBits));
	}
	return type;
}

