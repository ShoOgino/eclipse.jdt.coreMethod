private ReferenceBinding typeToRecord(TypeBinding type) {
	if (type.isArrayType())
		type = ((ArrayBinding) type).leafComponentType;

	switch (type.bindingType()) {
		case Binding.TYPE_PARAMETER :
		case Binding.WILDCARD_TYPE :
			return null;
		case Binding.PARAMETERIZED_TYPE :
		case Binding.RAW_TYPE :
			type = type.erasure();
	}

	if (type instanceof ReferenceBinding) {
		ReferenceBinding refType = (ReferenceBinding) type;
		if (!refType.isLocalType()) return refType;
	}
	return null;
}

