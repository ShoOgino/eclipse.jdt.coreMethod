	private boolean isPackageVisibleTo(PackageBinding pkg, ModuleBinding client, IPackageExport[] pvs) {
		PackageBinding resolved = getExportedPackage(pkg.readableName());
		if (resolved == pkg) {
			if (this.isAuto) { // all packages are exported by an automatic module
				return true;
			}
			Predicate<IPackageExport> isTargeted = IPackageExport::isQualified;
			Predicate<IPackageExport> isExportedTo = e -> 
				Stream.of(e.targets()).map(ref -> this.environment.getModule(ref)).filter(m -> m != null).anyMatch(client::equals);
			
			return Stream.of(pvs).filter(e -> CharOperation.equals(pkg.readableName(), e.name()))
					.anyMatch(isTargeted.negate().or(isExportedTo));
		}
		return false;
	}

