void recordTypeReference(TypeBinding type) {
	if (qualifiedReferences == null) return; // not recording dependencies

	if (type.isArrayType())
		type = ((ArrayBinding) type).leafComponentType;
	if (!type.isBaseType() && !typeReferences.containsIdentical(type)) {
		typeReferences.add(type);
		ReferenceBinding actualType = (ReferenceBinding) type;
		if (!actualType.isLocalType()) {
			recordQualifiedReference(actualType.isMemberType()
				? CharOperation.splitOn('.', actualType.readableName())
				: actualType.compoundName);
			if (actualType.enclosingType() != null)
				recordTypeReference(actualType.enclosingType()); // to record its supertypes
		}
		if (actualType.superclass() != null)
			recordTypeReference(actualType.superclass());
		ReferenceBinding[] interfaces = actualType.superInterfaces();
		if (interfaces != null && interfaces.length > 0)
			for (int j = 0, length = interfaces.length; j < length; j++)
				recordTypeReference(interfaces[j]);
	}
}

