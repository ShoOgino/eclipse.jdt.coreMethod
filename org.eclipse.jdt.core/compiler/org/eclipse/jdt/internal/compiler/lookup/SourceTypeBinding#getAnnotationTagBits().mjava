/**
 * Compute the tagbits for standard annotations. For source types, these could require
 * lazily resolving corresponding annotation nodes, in case of forward references.
 * For type use bindings, this method still returns the tagbits corresponding to the type 
 * declaration binding.
 * @see org.eclipse.jdt.internal.compiler.lookup.Binding#getAnnotationTagBits()
 */
@Override
public long getAnnotationTagBits() {
	if (!isPrototype())
		return this.prototype.getAnnotationTagBits();
	
	if ((this.tagBits & TagBits.EndHierarchyCheck) == 0) {
		CompilationUnitScope pkgCUS = this.scope.compilationUnitScope();
		boolean current = pkgCUS.connectingHierarchy;
		pkgCUS.connectingHierarchy = true;
		try {
			return internalGetAnnotationTagBits();
		} finally {
			pkgCUS.connectingHierarchy = current;
		}
	}
	return internalGetAnnotationTagBits();
}

