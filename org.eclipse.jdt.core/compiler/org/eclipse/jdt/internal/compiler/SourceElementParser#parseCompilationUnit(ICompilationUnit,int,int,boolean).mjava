public void parseCompilationUnit(
	ICompilationUnit unit, 
	int start, 
	int end, 
	boolean needReferenceInfo) {

	CompilationUnitDeclaration result;
	reportReferenceInfo = needReferenceInfo;
	boolean old = diet;
	try {
		diet = !needReferenceInfo;
		CompilationResult compilationUnitResult = new CompilationResult(unit, 0, 0);
		result = parse(unit, compilationUnitResult, start, end);
	} catch (AbortCompilation e) {
	} finally {
		if (scanner.recordLineSeparator) {
			requestor.acceptLineSeparatorPositions(scanner.lineEnds());
		}
		diet = old;
	}
}

