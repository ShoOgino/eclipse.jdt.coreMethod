/**
 * Code generation for a array reference
 */
public void generateCode(BlockScope currentScope, CodeStream codeStream, boolean valueRequired) {
	int pc = codeStream.position;
	receiver.generateCode(currentScope, codeStream, true);
	position.generateCode(currentScope, codeStream, true);
	codeStream.arrayAt(arrayElementBinding.id);
	// Generating code for the potential runtime type checking
	if (valueRequired) {
		codeStream.generateImplicitConversion(implicitConversion);
	} else {
		if (arrayElementBinding == LongBinding || arrayElementBinding == DoubleBinding) {
			codeStream.pop2();
		} else {
			codeStream.pop();
		}
	}
	codeStream.recordPositionsFrom(pc, this.sourceStart);
}

