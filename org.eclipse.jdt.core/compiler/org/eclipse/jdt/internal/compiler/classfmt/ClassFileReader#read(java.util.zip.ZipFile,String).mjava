	/**
	 * (c)1998 Object Technology International.
	 * (c)1998 International Business Machines Corporation.
	 *
	 * @param java.util.zip.ZipFile zip
	 * @param java.lang.String filename
	 * @return org.eclipse.jdt.internal.compiler.classfmt.DietClassFile
	 */
	public static ClassFileReader read(java.util.zip.ZipFile zip, String filename)
		throws ClassFormatException, java.io.IOException {
		java.util.zip.ZipEntry ze = zip.getEntry(filename);
		if (ze == null)
			return null;
		java.io.InputStream zipInputStream = zip.getInputStream(ze);
		byte classFileBytes[] = new byte[(int) ze.getSize()];
		int length = classFileBytes.length;
		int len = 0;
		int readSize = 0;
		while ((readSize != -1) && (len != length)) {
			readSize = zipInputStream.read(classFileBytes, len, length - len);
			len += readSize;
		}
		zipInputStream.close();
		return new ClassFileReader(classFileBytes, filename.toCharArray());
	}

