/**
 * This method returns the index into the constantPool corresponding to the type descriptor 
 * corresponding to a type constant pool name.
 */
public int literalIndexForType(final char[] constantPoolName) {
	int index;
	if ((index = classCache.putIfAbsent(constantPoolName, this.currentIndex)) < 0) {
		// The entry doesn't exit yet
		this.currentIndex++;
		if ((index = -index) > 0xFFFF){
			this.classFile.referenceBinding.scope.problemReporter().noMoreAvailableSpaceInConstantPool(this.classFile.referenceBinding.scope.referenceType());
		}
		writeU1(ClassTag);

		// Then the name index
		int nameIndexOffset = this.currentOffset;
		if (currentOffset + 2 >= poolContent.length) {
			resizePoolContents(2);
		}
		currentOffset+=2;
		final int nameIndex = literalIndex(constantPoolName);
		poolContent[nameIndexOffset++] = (byte) (nameIndex >> 8);
		poolContent[nameIndexOffset] = (byte) nameIndex;
	}
	return index;
}

