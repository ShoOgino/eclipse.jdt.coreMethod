public void removeStackFrameFor(int pos) {
	StackMapFrame frame = this.frames;
	while (frame.prevFrame != null && frame.pc >= pos) {
		if (frame.pc == pos) {
			StackMapFrame next = frame.nextFrame;
			StackMapFrame prev = frame.prevFrame;
			prev.nextFrame = next;
			if (next != null) {
				next.prevFrame = prev;
			}
			frame.nextFrame = null;
			frame.prevFrame = null;
			frame = prev;
			while (frame.nextFrame != null) {
				frame = frame.nextFrame;
			}
			this.frames = frame;
			this.framesCounter--;
			return;
		}
		frame = frame.prevFrame;
	}
}

