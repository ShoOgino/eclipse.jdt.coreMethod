public void storeStackMapFrame() {
	int frameSize = this.frames.size();
	StackMapFrame mapFrame = null;
	try {
		mapFrame = (StackMapFrame) this.currentFrame.clone();
		mapFrame.pc = this.position;
	} catch(CloneNotSupportedException e) {
		// ignore
	}
	if (frameSize == 0) {
			this.frames.add(mapFrame);
	} else {
		StackMapFrame lastFrame = (StackMapFrame) this.frames.get(frameSize - 1);
		if (lastFrame.pc == this.position) {
			this.frames.set(frameSize - 1, mapFrame);
		} else {
			this.frames.add(mapFrame);
		}
	}
}

