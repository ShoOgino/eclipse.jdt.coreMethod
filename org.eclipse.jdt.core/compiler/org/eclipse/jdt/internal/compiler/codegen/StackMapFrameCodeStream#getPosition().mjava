protected int getPosition() {
	// need to record a new stack frame at this position
	int pos = super.getPosition();
	try {
		if (this.frames.pc != pos) {
			StackMapFrame newFrame = (StackMapFrame) this.currentFrame.clone();
			this.frames.nextFrame = newFrame;
			newFrame.pc = pos;
			newFrame.prevFrame = this.frames;
			this.frames = newFrame;
			framesCounter++;
		} else {
			// the frame already exists
			this.frames.tagBits |= StackMapFrame.USED;
		}
	} catch (CloneNotSupportedException e) {
		e.printStackTrace();
	}		
	return pos;
}

