	/**
	 * Search the source position corresponding to the end of a given line number.
	 * Warning: returned position is 1-based index!
	 * @see Scanner#getLineEnd(int) We cannot directly use this method
	 * when linePtr field is not initialized.
	 */
	public final int getLineEnd(int lineNumber) {
	
		if (this.scanner.linePtr != -1) {
			return this.scanner.getLineEnd(lineNumber);
		}
		if (this.lineEnds == null) 
			return -1;
		if (lineNumber > this.lineEnds.length+1) 
			return -1;
		if (lineNumber <= 0) 
			return -1;
		if (lineNumber == this.lineEnds.length + 1) 
			return this.scanner.eofPosition;
		return this.lineEnds[lineNumber-1]; // next line start one character behind the lineEnd of the previous line
	}

