protected static char[] readTable(String filename) throws java.io.IOException {

	//files are located at Parser.class directory

	InputStream stream = Parser.class.getResourceAsStream(filename);
	if (stream == null) {
		throw new java.io.IOException("missing file" + filename);
	}

	ByteArrayOutputStream os = new ByteArrayOutputStream(32000);
	// the largest file is 30K
	byte[] buffer = new byte[10000];

	int streamLength = 0;
	int lastReadSize = 0;
	while ((lastReadSize = stream.read(buffer)) > 0) {
		streamLength += lastReadSize;
		os.write(buffer, 0, lastReadSize);
	}
	byte[] bytes = os.toByteArray();
	stream.close();

	//minimal integrity check (even size expected)
	if (streamLength % 2 != 0)
		throw new java.io.IOException("corrupted file " + filename);

	// convert bytes into chars
	char[] chars = new char[streamLength / 2];
	int i = 0;
	int charIndex = 0;

	while (true) {
		chars[charIndex++] = (char) (((bytes[i++] & 0xFF) << 8) + (bytes[i++] & 0xFF));
		if (i == streamLength)
			break;
	}
	return chars;
}

