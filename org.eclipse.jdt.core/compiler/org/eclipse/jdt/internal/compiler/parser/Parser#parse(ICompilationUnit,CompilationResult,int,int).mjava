	public CompilationUnitDeclaration parse(
		ICompilationUnit sourceUnit,
		CompilationResult compilationResult,
		int start,
		int end) {
		// parses a compilation unit and manages error handling (even bugs....)

		CompilationUnitDeclaration unit;
		try {
			/* automaton initialization */
			initialize();
			goForCompilationUnit();

			/* scanner initialization */
			scanner.setSourceBuffer(sourceUnit.getContents());
			int sourceLength = scanner.source.length;
			scanner.resetTo(start, end);
			/* unit creation */
			referenceContext =
				compilationUnit =
					new CompilationUnitDeclaration(
						problemReporter,
						compilationResult,
						scanner.source.length);
			/* run automaton */
			parse();
		} finally {
			unit = compilationUnit;
			compilationUnit = null; // reset parser
		}
		return unit;
	}

